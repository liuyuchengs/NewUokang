{"version":3,"sources":["grabOrder.js"],"names":["define","$scope","$rootScope","Tool","Ajax","hasGift","gift","init","loading","noWindowListen","loadUserinfo","queryGift","get","url","host","headers","accessToken","userInfo","then","data","code","length","alert"],"mappings":"AAAAA,OAAO,WACN,MAAO,UAASC,OAAOC,WAAWC,KAAKC,MACtCH,OAAOI,SAAU,EACjBJ,OAAOK,QAGPL,OAAOM,KAAO,WACbL,WAAWM,SAAS,EACpBL,KAAKM,iBACLN,KAAKO,eACLT,OAAOU,aAIRV,OAAOU,UAAY,WAClBP,KAAKQ,KACJC,IAAIV,KAAKW,KAAK,8BACdC,SACCC,YAAcb,KAAKc,SAASD,eAE3BE,KAAK,SAASC,MACF,GAAXA,KAAKC,MACJD,KAAKA,KAAKE,OAAO,IACnBpB,OAAOK,KAAOa,KAAKA,KAAK,GACxBlB,OAAOI,SAAU,KATpBD,SAYS,WACRD,KAAKmB,MAAM,qBAbZlB,WAcW,WACVF,WAAWM,SAAU","file":"grabOrder.js","sourcesContent":["define(function(){\r\n\treturn function($scope,$rootScope,Tool,Ajax){\r\n\t\t$scope.hasGift = false;\r\n\t\t$scope.gift = {};\r\n\r\n\t\t// 初始化页面\r\n\t\t$scope.init = function(){\r\n\t\t\t$rootScope.loading =false;\r\n\t\t\tTool.noWindowListen();\r\n\t\t\tTool.loadUserinfo();\r\n\t\t\t$scope.queryGift();\r\n\t\t}\r\n\r\n\t\t// 查询惠赠订单\r\n\t\t$scope.queryGift = function(){\r\n\t\t\tAjax.get({\r\n\t\t\t\turl:Tool.host+\"/wx/order/queryUserGiftCode\",\r\n\t\t\t\theaders:{\r\n\t\t\t\t\t\"accessToken\":Tool.userInfo.accessToken,\r\n\t\t\t\t}\r\n\t\t\t}).then(function(data){\r\n\t\t\t\tif(data.code==0){\r\n\t\t\t\t\tif(data.data.length>0){\r\n\t\t\t\t\t\t$scope.gift = data.data[0];\r\n\t\t\t\t\t\t$scope.hasGift = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}).catch(function(){\r\n\t\t\t\tTool.alert(\"获取惠赠信息失败，请稍后再试!\");\r\n\t\t\t}).finally(function(){\r\n\t\t\t\t$rootScope.loading = false;\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n})\r\n"],"sourceRoot":"/source/"}