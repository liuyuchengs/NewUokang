{"version":3,"sources":["login.js"],"names":["define","$scope","$rootScope","$location","Ajax","Tool","phone","password","init","hasBgColor","noWindowListen","login","check","data","post","url","host","params","then","code","setLocal","path","alert","loading","test","length"],"mappings":"AAAAA,OAAO,WACN,MAAO,UAASC,OAAOC,WAAWC,UAAUC,KAAKC,MAChDJ,OAAOK,MAAQ,GACfL,OAAOM,SAAW,GAGlBN,OAAOO,KAAO,WACbN,WAAWO,YAAa,EACxBJ,KAAKK,kBAINT,OAAOU,MAAM,WACZ,GAAGV,OAAOW,QAAQ,CACjB,GAAIC,OAAQP,MAAML,OAAOK,MAAMC,SAASN,OAAOM,SAC/CH,MAAKU,MACJC,IAAIV,KAAKW,KAAK,oBACdC,OAAOJ,OACLK,KAAK,SAASL,MACF,GAAXA,KAAKM,MACPd,KAAKe,SAAS,OAAOP,KAAKA,MAC1BV,UAAUkB,KAAK,UACI,GAAXR,KAAKM,KACbd,KAAKiB,MAAM,kBAEXjB,KAAKiB,MAAM,WAVblB,SAYS,WACRC,KAAKiB,MAAM,iBAbZlB,WAcW,WACVF,WAAWqB,SAAU,QAGtBlB,MAAKiB,MAAM,uBAKbrB,OAAOW,MAAQ,WACd,SAAG,sBAAsBY,KAAKvB,OAAOK,QAAQL,OAAOM,SAASkB,QAAQ,GAAGxB,OAAOM,SAASkB,QAAQ","file":"login.js","sourcesContent":["define(function(){\r\n\treturn function($scope,$rootScope,$location,Ajax,Tool){\r\n\t\t$scope.phone = \"\" ;\r\n\t\t$scope.password = \"\";\r\n\t\t\r\n\t\t//初始化页面\r\n\t\t$scope.init = function(){\r\n\t\t\t$rootScope.hasBgColor = false;\r\n\t\t\tTool.noWindowListen();\r\n\t\t}\r\n\r\n\t\t// 登陆\r\n\t\t$scope.login=function(){\r\n\t\t\tif($scope.check()){\r\n\t\t\t\tvar data = {phone:$scope.phone,password:$scope.password};\r\n\t\t\t\tAjax.post({\r\n\t\t\t\t\turl:Tool.host+\"/wx/login/wxlogin\",\r\n\t\t\t\t\tparams:data,\r\n\t\t\t\t}).then(function(data){\r\n\t\t\t\t\tif(data.code==0){\r\n\t\t\t\t\t\tTool.setLocal(\"user\",data.data);\r\n\t\t\t\t\t\t$location.path(\"/user\");\r\n\t\t\t\t\t}else if(data.code==1){\r\n\t\t\t\t\t\tTool.alert(\"账号或者密码错误,请重新输入\");\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tTool.alert(\"未知错误!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(function(){\r\n\t\t\t\t\tTool.alert(\"登录错误，请稍后再试！\");\r\n\t\t\t\t}).finally(function(){\r\n\t\t\t\t\t$rootScope.loading = false;\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tTool.alert(\"请检查手机号码或者密码长度符合要求！\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 检查信息是否符合要求\r\n\t\t$scope.check = function(){\r\n\t\t\tif(/^1[3|4|5|7|8]\\d{9}$/.test($scope.phone)&&$scope.password.length>=8&&$scope.password.length<=20){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n})\r\n"],"sourceRoot":"/source/"}