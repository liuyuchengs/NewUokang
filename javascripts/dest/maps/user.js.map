{"version":3,"sources":["user.js"],"names":["define","$scope","$rootScope","$location","Tool","Ajax","user","isLogin","init","hasBgColor","noWindowListen","initText","checkLogin","loadUserinfo","queryFocus","userInfo","nickname","face","tip","alert","mess","post","url","host","params","accessToken","then","data","code","countFocusMan","countFansMan","loading","path","query","changeRoute"],"mappings":"AAAAA,OAAO,WACH,MAAO,UAASC,OAAOC,WAAWC,UAAUC,KAAKC,MAC7CJ,OAAOK,QACPL,OAAOM,SAAU,EAGjBN,OAAOO,KAAO,WACVN,WAAWO,YAAa,EACxBL,KAAKM,iBACLT,OAAOU,WACJP,KAAKQ,eACJR,KAAKS,eACLZ,OAAOa,eAKfb,OAAOU,SAAW,WACXP,KAAKQ,cACJR,KAAKS,eACLZ,OAAOK,KAAOF,KAAKW,SACnBd,OAAOM,SAAU,EACS,KAAvBN,OAAOK,KAAKU,UAAsC,OAAvBf,OAAOK,KAAKU,WACtCf,OAAOK,KAAKU,SAAW,cAG3Bf,OAAOK,KAAKW,KAAO,+BACnBhB,OAAOK,KAAKY,IAAM,WAK1BjB,OAAOkB,MAAQ,SAASC,MACpBhB,KAAKe,MAAMC,OAIfnB,OAAOa,WAAa,WAChBT,KAAKgB,MACDC,IAAIlB,KAAKmB,KAAK,0BACdC,QAASC,YAAcrB,KAAKW,SAASU,eACtCC,KAAK,SAASC,MACE,GAAXA,KAAKC,OACwB,OAA1BD,KAAKA,KAAKE,eAAgD,KAA1BF,KAAKA,KAAKE,gBACzCF,KAAKA,KAAKE,cAAgB,GAEF,OAAzBF,KAAKA,KAAKG,cAA+C,KAA1BH,KAAKA,KAAKG,eACxCH,KAAKA,KAAKG,aAAc,GAE5B7B,OAAO4B,cAAgBF,KAAKA,KAAKE,cACjC5B,OAAO6B,aAAeH,KAAKA,KAAKG,gBAZxCzB,SAcS,WACLJ,OAAO4B,cAAgB,EACvB5B,OAAO6B,aAAe,EACtB1B,KAAKe,MAAM,eAjBfd,WAkBW,WACnBH,WAAW6B,SAAU,KAKjB9B,OAAAA,QAAc,SAAS+B,KAAKC,OACrB7B,KAAKQ,aACJR,KAAK8B,YAAYF,KAAKC,OAEtB7B,KAAK8B,YAAY,SAAS","file":"user.js","sourcesContent":["define(function(){\r\n    return function($scope,$rootScope,$location,Tool,Ajax){\r\n        $scope.user = {};\r\n        $scope.isLogin = false;\r\n\r\n        //页面初始化\r\n        $scope.init = function(){\r\n            $rootScope.hasBgColor = true;\r\n            Tool.noWindowListen();\r\n            $scope.initText();\r\n            if(Tool.checkLogin()){\r\n                Tool.loadUserinfo();\r\n                $scope.queryFocus();\r\n            }\r\n        }\r\n\r\n        //切换用户名称的显示\r\n        $scope.initText = function(){\r\n            if(Tool.checkLogin()){\r\n                Tool.loadUserinfo();\r\n                $scope.user = Tool.userInfo;\r\n                $scope.isLogin = true;\r\n                if($scope.user.nickname===\"\"||$scope.user.nickname===null){\r\n                    $scope.user.nickname = \"您还没有填写昵称\";\r\n                }\r\n            }else{\r\n                $scope.user.face = \"../contents/img/men-head.png\";\r\n                $scope.user.tip = \"点击登录注册\";\r\n            }\r\n        }\r\n\r\n        // 未开放项目的提示\r\n        $scope.alert = function(mess){\r\n            Tool.alert(mess);\r\n        }\r\n\r\n        //获取关注数量和粉丝数量\r\n        $scope.queryFocus = function(){\r\n            Ajax.post({\r\n                url:Tool.host+\"/wx/focus/focusManCount\",\r\n                params: {\"accessToken\":Tool.userInfo.accessToken},\r\n            }).then(function(data){\r\n                 if(data.code==0){\r\n                    if(data.data.countFocusMan===null||data.data.countFocusMan===\"\"){\r\n                        data.data.countFocusMan = 0;\r\n                    }\r\n                    if(data.data.countFansMan===null||data.data.countFansMan ===\"\"){\r\n                        data.data.countFansMan =0;\r\n                    }\r\n                    $scope.countFocusMan = data.data.countFocusMan;\r\n                    $scope.countFansMan = data.data.countFansMan;\r\n                }\r\n            }).catch(function(){\r\n                $scope.countFocusMan = 0;\r\n                $scope.countFansMan = 0;\r\n                Tool.alert(\"获取粉丝信息失败!\");\r\n            }).finally(function(){\r\n\t\t\t\t$rootScope.loading = false;\r\n\t\t\t})\r\n        }\r\n        \r\n        //跳转到选项页面\r\n        $scope.goto = function(path,query){\r\n            if(Tool.checkLogin()){\r\n                Tool.changeRoute(path,query);\r\n            }else{\r\n                Tool.changeRoute(\"/login\",\"\");\r\n            }\r\n        };\r\n    }\r\n})"],"sourceRoot":"/source/"}