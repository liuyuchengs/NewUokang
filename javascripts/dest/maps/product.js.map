{"version":3,"sources":["product.js"],"names":["define","$scope","$rootScope","$location","Tool","Ajax","queryParams","city","area","professionId","itemId","order","currentPage","pageRows","location","noProduct","noProductText","hasBg","hasLocation","hasOrder","hasArea","hasClass","menuParams","classes","orderParams","default","has","val","price","priceDesc","scoreDesc","countDesc","locationes","areaParams","futian","nanshan","luohu","baoan","longhua","longgang","yantian","classParams","productParams","yake","id","meirong","fck","zhongyi","title","products","init","hasBgColor","loadClassParams","initLocation","loadData","getSession","search","product","all","zzy","xiya","kcy","buya","baya","ycmr","jiaozheng","yichi","yzzl","qita","yanbu","mianbu","bibu","xiong","xizhi","simi","zhushe","jiguang","koucun","jiancha","fenmian","toubu","jianjing","yaobu","tuibu","quanshen","jingluo","other","hasProduct","window","onscroll","loading","body","document","html","documentElement","height","Math","max","scrollHeight","offsetHeight","clientHeight","innerHeight","scrollY","loadNext","switchMenu","menu","areaSelect","params","select","orderSelect","locationInfo","longitude","latitude","classSelect","post","url","host","then","data","length","mergeProdcut","concat","alert","items","forEach","item","priceunit","preferPriceType","pricetype","detail","productId","hospitalId","changeRoute","question"],"mappings":"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","file":"product.js","sourcesContent":["define(function(){\r\n\treturn function($scope,$rootScope,$location,Tool,Ajax){\r\n\t\t//查询条件\r\n\t\t$scope.queryParams = {\r\n\t\t\tcity:\"深圳\",\r\n\t\t\tarea:\"\",\r\n\t\t\tprofessionId:\"\",\r\n\t\t\titemId:\"\",\r\n\t\t\torder:\"\",\r\n\t\t\tcurrentPage:1,\r\n\t\t\tpageRows:10,\r\n\t\t\tlocation:\"\",\r\n\t\t}\r\n\t\t//动画变量\r\n\t\t$scope.noProduct = false;\r\n\t\t$scope.noProductText = \"\";\r\n\t\t$scope.hasBg = false;\r\n\t\t$scope.hasLocation = false;\r\n\t\t//菜单切换变量\r\n\t\t$scope.hasOrder = false;\r\n\t\t$scope.hasArea = false;\r\n\t\t$scope.hasClass = false;\r\n\t\t//菜单项变量\r\n\t\t$scope.menuParams = {\r\n\t\t\tarea:false,\r\n\t\t\torder:false,\r\n\t\t\tclasses:false,\r\n\t\t}\r\n\t\t$scope.orderParams = {\r\n\t\t\tdefault:{has:true,val:\"\"},\r\n\t\t\tprice:{has:false,val:\"prefer_price asc\"},\r\n\t\t\tpriceDesc:{has:false,val:\"prefer_price desc\"},\r\n\t\t\tscoreDesc:{has:false,val:\"hospital_score asc\"},\r\n\t\t\tcountDesc:{has:false,val:\"sales desc\"},\r\n\t\t\tlocationes:{has:false,val:\"locationes\"}\r\n\t\t}\r\n\t\t$scope.areaParams = {\r\n\t\t\tdefault:{has:true,val:\"\"},\r\n\t\t\tfutian:{has:false,val:\"福田区\"},\r\n\t\t\tnanshan:{has:false,val:\"南山区\"},\r\n\t\t\tluohu:{has:false,val:\"罗湖区\"},\r\n\t\t\tbaoan:{has:false,val:\"宝安区\"},\r\n\t\t\tlonghua:{has:false,val:\"龙华新区\"},\r\n\t\t\tlonggang:{has:false,val:\"龙岗区\"},\r\n\t\t\tyantian:{has:false,val:\"盐田\"},\r\n\t\t}\r\n\t\t$scope.classParams = {};\r\n\t\t$scope.productParams = {\r\n\t\t\tyake:{has:false,val:\"牙科\",id:2},\r\n\t\t\tmeirong:{has:false,val:\"医学美容\",id:3},\r\n\t\t\tfck:{has:false,val:\"高端妇产科\",id:4},\r\n\t\t\tzhongyi:{has:false,val:\"中医理疗\",id:6}\r\n\t\t}\r\n\t\t$scope.title=\"\";\r\n\t\t$scope.products = [];\r\n\r\n\t\t//初始化\r\n\t\t$scope.init = function(){\r\n\t\t\t$rootScope.hasBgColor = false;\r\n\t\t\t$scope.loadClassParams();\r\n\t\t\t$scope.initLocation();\r\n\t\t\t$scope.loadData();\r\n\t\t}\r\n\r\n\t\t// 加载地理信息\r\n\t\t$scope.initLocation = function(){\r\n\t\t\tif(Tool.getSession(\"locationInfo\")){\r\n\t\t\t\t$scope.hasLocation = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 加载分类信息\r\n\t\t$scope.loadClassParams = function(){\r\n\t\t\tif($location.search().product){\r\n\t\t\t\tvar product = $location.search().product;\r\n\t\t\t\t$scope.productParams[product].has = true;\r\n\t\t\t\t$scope.title = $scope.productParams[product].val;\r\n\t\t\t\t$scope.queryParams.professionId = $scope.productParams[product].id;\r\n\t\t\t\tswitch(product){\r\n\t\t\t\t\tcase \"yake\":\r\n\t\t\t\t\t\t$scope.classParams = {\r\n\t\t\t\t\t\t\tall:{has:true,id:\"\"},\r\n\t\t\t\t\t\t\tzzy:{has:false,id:19},\r\n\t\t\t\t\t\t\txiya:{has:false,id:20},\r\n\t\t\t\t\t\t\tkcy:{has:false,id:82},\r\n\t\t\t\t\t\t\tbuya:{has:false,id:22},\r\n\t\t\t\t\t\t\tbaya:{has:false,id:23},\r\n\t\t\t\t\t\t\tycmr:{has:false,id:24},\r\n\t\t\t\t\t\t\tjiaozheng:{has:false,id:64},\r\n\t\t\t\t\t\t\tyichi:{has:false,id:65},\r\n\t\t\t\t\t\t\tyzzl:{has:false,id:63},\r\n\t\t\t\t\t\t\tqita:{has:false,id:60},\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"meirong\":\r\n\t\t\t\t\t\t$scope.classParams = {\r\n\t\t\t\t\t\t\tall:{has:true,id:\"\"},\r\n\t\t\t\t\t\t\tyanbu:{has:false,id:7},\r\n\t\t\t\t\t\t\tmianbu:{has:false,id:8},\r\n\t\t\t\t\t\t\tbibu:{has:false,id:9},\r\n\t\t\t\t\t\t\txiong:{has:false,id:45},\r\n\t\t\t\t\t\t\txizhi:{has:false,id:12},\r\n\t\t\t\t\t\t\tsimi:{has:false,id:78},\r\n\t\t\t\t\t\t\tzhushe:{has:false,id:79},\r\n\t\t\t\t\t\t\tjiguang:{has:false,id:80},\r\n\t\t\t\t\t\t\tkoucun:{has:false,id:81},\r\n\t\t\t\t\t\t\tqita:{has:false,id:13},\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"fck\":\r\n\t\t\t\t\t\t$scope.classParams = {\r\n\t\t\t\t\t\t\tall:{has:true,id:\"\"},\r\n\t\t\t\t\t\t\tjiancha:{has:false,id:48},\r\n\t\t\t\t\t\t\tfenmian:{has:false,id:49}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"zhongyi\":\r\n\t\t\t\t\t\t$scope.classParams = {\r\n\t\t\t\t\t\t\tall:{has:true,id:\"\"},\r\n\t\t\t\t\t\t\ttoubu:{has:false,id:51},\r\n\t\t\t\t\t\t\tjianjing:{has:false,id:52},\r\n\t\t\t\t\t\t\tyaobu:{has:false,id:53},\r\n\t\t\t\t\t\t\ttuibu:{has:false,id:54},\r\n\t\t\t\t\t\t\tquanshen:{has:false,id:55},\r\n\t\t\t\t\t\t\tjingluo:{has:false,id:56},\r\n\t\t\t\t\t\t\tqita:{has:false,id:57}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t$scope.classParams = {\r\n\t\t\t\t\t\t\tall:{has:true,id:\"\"},\r\n\t\t\t\t\t\t\tzzy:{has:false,id:19},\r\n\t\t\t\t\t\t\txiya:{has:false,id:20},\r\n\t\t\t\t\t\t\tkcy:{has:false,id:82},\r\n\t\t\t\t\t\t\tbuya:{has:false,id:22},\r\n\t\t\t\t\t\t\tbaya:{has:false,id:23},\r\n\t\t\t\t\t\t\tycmr:{has:false,id:24},\r\n\t\t\t\t\t\t\tjiaozheng:{has:false,id:64},\r\n\t\t\t\t\t\t\tyichi:{has:false,id:65},\r\n\t\t\t\t\t\t\tyzzl:{has:false,id:63},\r\n\t\t\t\t\t\t\tother:{has:false,id:60},\r\n\t\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t$scope.hasProduct[\"yake\"] = true;\r\n\t\t\t\t$scope.title = $scope.productParams[\"yake\"].val;\r\n\t\t\t\t$scope.queryParams.professionId = 2;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 滚动监听\r\n\t\twindow.onscroll = function(){\r\n\t\t\tif($scope.loading||$scope.noProduct){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar body = document.body;\r\n\t\t\tvar html = document.documentElement;\r\n\t\t\tvar height = Math.max( body.scrollHeight, body.offsetHeight,html.clientHeight, html.scrollHeight, html.offsetHeight );\r\n\t\t\tif(height>window.innerHeight){\r\n\t\t\t\tif (height - window.scrollY - window.innerHeight < 100) {\r\n\t\t\t\t\t$scope.loadNext();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 下拉菜单切换\r\n\t\t$scope.switchMenu =function(menu){\r\n\t\t\tswitch(menu){\r\n\t\t\t\tcase \"area\":\r\n\t\t\t\t\tif($scope.hasOrder){\r\n\t\t\t\t\t\t$scope.hasOrder = false;\r\n\t\t\t\t\t\t$scope.menuParams.order = false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif($scope.hasClass){\r\n\t\t\t\t\t\t$scope.hasClass = false;\r\n\t\t\t\t\t\t$scope.menuParams.classes = false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$scope.hasArea = !$scope.hasArea;\r\n\t\t\t\t\tif($scope.hasArea){\r\n\t\t\t\t\t\t$scope.menuParams.area = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$scope.menuParams.area = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"order\":\r\n\t\t\t\t\tif($scope.hasArea){\r\n\t\t\t\t\t\t$scope.hasArea = false;\r\n\t\t\t\t\t\t$scope.menuParams.area = false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif($scope.hasClass){\r\n\t\t\t\t\t\t$scope.hasClass = false;\r\n\t\t\t\t\t\t$scope.menuParams.classes = false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$scope.hasOrder = !$scope.hasOrder;\r\n\t\t\t\t\tif($scope.hasOrder){\r\n\t\t\t\t\t\t$scope.menuParams.order = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$scope.menuParams.order = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"class\":\r\n\t\t\t\t\tif($scope.hasOrder){\r\n\t\t\t\t\t\t$scope.hasOrder = false;\r\n\t\t\t\t\t\t$scope.menuParams.order = false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif($scope.hasArea){\r\n\t\t\t\t\t\t$scope.hasArea = false;\r\n\t\t\t\t\t\t$scope.menuParams.area = false;\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$scope.hasClass = !$scope.hasClass;\r\n\t\t\t\t\tif($scope.hasClass){\r\n\t\t\t\t\t\t$scope.menuParams.classes = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$scope.menuParams.classes = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif($scope.hasOrder||$scope.hasArea||$scope.hasClass){\r\n\t\t\t\t$scope.hasBg = true;\r\n\t\t\t}else{\r\n\t\t\t\t$scope.hasBg = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 区域下拉菜单项点击\r\n\t\t$scope.areaSelect =function(params){\r\n\t\t\tTool.select(params,$scope.areaParams);\r\n\t\t\t$scope.queryParams.area = $scope.areaParams[params].val;\r\n\t\t\t$scope.queryParams.currentPage = 1;\r\n\t\t\t$scope.products = [];\r\n\t\t\t$scope.noProduct = false;\r\n\t\t\t$scope.loadData();\r\n\t\t\t$scope.switchMenu(\"area\");\r\n\t\t}\r\n\r\n\t\t// 排序下拉菜单项点击\r\n\t\t$scope.orderSelect = function(params){\r\n\t\t\tTool.select(params,$scope.orderParams);\r\n\t\t\t$scope.queryParams.order = $scope.orderParams[params].val;\r\n\t\t\t$scope.queryParams.currentPage = 1;\r\n\t\t\t$scope.products = [];\r\n\t\t\t$scope.noProduct = false;\r\n\t\t\t$scope.switchMenu(\"order\");\r\n\t\t\tif(params==\"locationes\"){\r\n\t\t\t\tvar locationInfo = Tool.getSession(\"locationInfo\");\r\n\t\t\t\t$scope.queryParams.location = locationInfo.longitude+\",\"+locationInfo.latitude;\r\n\t\t\t}else{\r\n\t\t\t\t$scope.queryParams.location = \"\";\r\n\t\t\t}\r\n\t\t\t$scope.loadData();\r\n\t\t}\r\n\r\n\t\t// 类别下拉菜单项点击\r\n\t\t$scope.classSelect = function(params){\r\n\t\t\tTool.select(params,$scope.classParams);\r\n\t\t\t$scope.queryParams.itemId = $scope.classParams[params].id;\r\n\t\t\t$scope.queryParams.currentPage = 1;\r\n\t\t\t$scope.products = [];\r\n\t\t\t$scope.noProduct = false;\r\n\t\t\t$scope.switchMenu(\"class\");\r\n\t\t\t$scope.loadData();\r\n\t\t}\r\n\r\n\t\t// 查询数据\r\n\t\t$scope.loadData = function(){\r\n\t\t\tAjax.post({\r\n\t\t\t\turl:Tool.host+\"/wx/product/querylist\",\r\n\t\t\t\tparams:$scope.queryParams\r\n\t\t\t}).then(function(data){\r\n\t\t\t\tif(data.length<1){\r\n\t\t\t\t\tif($scope.products.length<1){\r\n\t\t\t\t\t\t$scope.noProductText = \"没有项目信息,请选择其他区域或者时间!\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$scope.noProductText = \"已经没有项目了!\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$scope.noProduct = true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$scope.mergeProdcut(data);\r\n\t\t\t\t\t$scope.products = $scope.products.concat(data);\r\n\t\t\t\t}\r\n\t\t\t}).catch(function(){\r\n\t\t\t\t$scope.noProduct = true;\r\n\t\t\t\tTool.alert(\"数据加载失败，请稍后再试!\");\r\n\t\t\t}).finally(function(){\r\n\t\t\t\t$rootScope.loading = false;\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t//处理项目信息\r\n\t\t$scope.mergeProdcut = function(items){\r\n\t\t\titems.forEach(function(item){\r\n\t\t\t\tif(item.priceunit!=null&&item.priceunit!=\"\"){\r\n\t\t\t\t\titem.preferPriceType = item.pricetype+\"/\"+item.priceunit;\r\n\t\t\t\t}else{\r\n\t\t\t\t\titem.preferPriceType = item.pricetype;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// 加载下一页数据\r\n\t\t$scope.loadNext = function(){\r\n\t\t\t$scope.queryParams.currentPage++;\r\n\t\t\t$scope.loadData();\r\n\t\t}\r\n\r\n\t\t// 跳转到详细页面\r\n\t\t$scope.detail = function(productId,hospitalId){\r\n\t\t\tTool.changeRoute(\"/product/detail\",\"flag=1&productId=\"+productId+\"&hospitalId=\"+hospitalId);\r\n\t\t}\r\n\r\n\t\t// 疑问按钮处理函数\r\n\t\t$scope.question = function(){\r\n\t\t\tTool.alert(\"如有疑问，请致电0755-26905699\");\r\n\t\t}\r\n\t}\r\n})"],"sourceRoot":"/source/"}