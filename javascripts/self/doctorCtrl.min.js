app.controller("doctorCtrl",["$scope","$http","Tool","Params",function($scope,$http,Tool,Params){
	$scope.hasDoctorMenu = true;
	$scope.hasBg = false;
	$scope.profValue = "";
	$scope.profItemValue = "";
	//下拉菜单项变量
	$scope.orderParams ={
		default:{has:true,val:""},
		title:{has:false,val:""},
		score:{has:false,val:""}
	}
	$scope.areaParams = Params.areaParams;
	$scope.professionalParams = Params.professionalParams;


	//导航栏变量，需定义在上述变量的后面
	$scope.menuParams = {
		area:{has:false,val:$scope.areaParams},
		order:{has:false,val:$scope.orderParams},
		professional:{has:false,val:$scope.professionalParams},
	}

	$scope.menuClick = function(value){
		Tool.menuClick($scope,value);
	}

	$scope.switchMenu = function(menu){
		$scope.switchObj(menu,$scope.menuParams,true);
	}

	$scope.selectMenu = function(item,obj){
		var ob = $scope.menuParams[obj].val;
		$scope.switchObj(item,ob);
	}

	$scope.selectProfression = function(item){
		$scope.switchObj(item,$scope.professionalParams);
	}

	$scope.selectProfressionItem = function(item,pro){
		if(item!=$scope.profItemValue){
			if($scope.profValue==""&&$scope.profItemValue==""){
				$scope.professionalParams[pro].val[item].has = true;
			}else{
				$scope.professionalParams[$scope.profValue].val[$scope.profItemValue].has = false;
				$scope.professionalParams[pro].val[item].has = true;
			}
			$scope.profItemValue = item;
			$scope.profValue = pro;
		}
	}

	$scope.switchObj = function(item,obj,hasBg){
		for(var pro in obj){
			if(pro==item){
				obj[pro].has = !obj[pro].has;
				if(hasBg){
					$scope.hasBg = obj[pro].has;
				}
			}else{
				obj[pro].has = false;
			}
		}
	}
}])
