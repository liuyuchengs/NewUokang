{"version":3,"sources":["userinfochangeCtrl.js"],"names":["app","controller","$scope","$http","$location","Tool","title","tip","val","sexparams","men","women","titleParams","realname","sex","phone","age","nickname","tipParams","angular","element","document","ready","item","search","hassex","hasinput","loadUserinfo","change","check","url","getSession","params","post","headers","Content-type","accessToken","userInfo","success","data","code","setLocal","goPage","alert","message","error","length","test","parseInt","select","value"],"mappings":"AAAAA,IAAIC,WAAW,sBAAsB,SAAS,QAAQ,YAAY,OAAO,SAASC,EAAOC,EAAMC,EAAUC,GACxGH,EAAOI,MACPJ,EAAOK,IACPL,EAAOM,IAAI,GACXN,EAAOO,WACNC,KAAI,EACJC,OAAM,GAEPT,EAAOU,aACNC,SAAW,OACXC,IAAM,OACNC,MAAQ,OACRC,IAAM,KACNC,SAAW,MAEZf,EAAOgB,WACNL,SAAW,QACXC,IAAM,QACNC,MAAQ,UACRC,IAAM,QACNC,SAAW,SAEZE,QAAQC,QAAQC,UAAUC,MAAM,WAC/BpB,EAAOqB,KAAOnB,EAAUoB,SAASD,KACjCrB,EAAOI,MAAQJ,EAAOU,YAAYV,EAAOqB,MACzCrB,EAAOK,IAAML,EAAOgB,UAAUhB,EAAOqB,MACrB,OAAbrB,EAAOqB,MACTrB,EAAOuB,QAAS,EAChBvB,EAAOM,IAAM,KAEbN,EAAOwB,UAAW,EAEnBrB,EAAKsB,aAAazB,KAEnBA,EAAO0B,OAAS,WACf,GAAG1B,EAAO2B,QAAQ,CACjB,GAAIC,GAAMzB,EAAK0B,WAAW,QAAQ,6BAC9BC,EAAS,QAAQ9B,EAAOqB,KAAK,QAAQrB,EAAOM,GAChDL,GAAM8B,KAAKH,EAAIE,GACdE,SACCC,eAAe,kDACfC,YAAclC,EAAOmC,SAASD,eAG/BE,QAAQ,SAASC,GACH,GAAXA,EAAKC,MACPnC,EAAKoC,SAAS,OAAOF,EAAKA,MAC1BlC,EAAKqC,OAAO,6BACO,GAAXH,EAAKC,MACbnC,EAAKsC,MAAMzC,EAAOqC,EAAKK,WAEtBC,MAAM,WACRxC,EAAKsC,MAAMzC,EAAO,eAIrBA,EAAO2B,MAAQ,WACd,MAAsB,IAAnB3B,EAAOM,IAAIsC,QACbzC,EAAKsC,MAAMzC,EAAO,YACX,GACc,YAAbA,EAAOqB,KAA8B,YAAbrB,EAAOqB,KACpCrB,EAAOM,IAAIsC,OAAO,EAAE5C,EAAOM,IAAIsC,OAAO,IACjC,GAEPzC,EAAKsC,MAAMzC,EAAO,gBACX,GAEa,OAAbA,EAAOqB,KACA,KAAZrB,EAAOM,KAAsB,KAAZN,EAAOM,KACnB,GAEPH,EAAKsC,MAAMzC,EAAO,cACX,GAEa,SAAbA,EAAOqB,KACZ,sBAAsBwB,KAAK7C,EAAOM,MAC7B,GAEPH,EAAKsC,MAAMzC,EAAO,gBACX,GAEa,OAAbA,EAAOqB,KACZyB,SAAS9C,EAAOM,KAAK,GAAGwC,SAAS9C,EAAOM,KAAK,KAC/CN,EAAOM,IAAMwC,SAAS9C,EAAOM,MACtB,IAEPH,EAAKsC,MAAMzC,EAAO,cACX,IAGRG,EAAKsC,MAAMzC,EAAO,sBACX,IAGTA,EAAO+C,OAAS,SAASC,GACxB,GAAU,KAAPA,GACF,IAAIhD,EAAOO,UAAUC,IAIpB,MAHAR,GAAOO,UAAUC,KAAM,EACvBR,EAAOO,UAAUE,OAAQ,OACzBT,EAAOM,IAAM,UAGN0C,EAAM,OACVhD,EAAOO,UAAUE,QACpBT,EAAOO,UAAUC,KAAM,EACvBR,EAAOO,UAAUE,OAAQ,EACzBT,EAAOM,IAAM","file":"userinfochangeCtrl.js","sourcesContent":["app.controller(\"userinfochangeCtrl\",[\"$scope\",\"$http\",\"$location\",\"Tool\",function($scope,$http,$location,Tool){\r\n\t$scope.title;\r\n\t$scope.tip;\r\n\t$scope.val=\"\";\r\n\t$scope.sexparams={\r\n\t\tmen:true,\r\n\t\twomen:false\r\n\t}\r\n\t$scope.titleParams = {\r\n\t\t\"realname\":\"真实姓名\",\r\n\t\t\"sex\":\"选择性别\",\r\n\t\t\"phone\":\"手机号码\",\r\n\t\t\"age\":\"年龄\",\r\n\t\t\"nickname\":\"昵称\",\r\n\t}\r\n\t$scope.tipParams = {\r\n\t\t\"realname\":\"请填写姓名\",\r\n\t\t\"sex\":\"请填写性别\",\r\n\t\t\"phone\":\"请填写手机号码\",\r\n\t\t\"age\":\"请填写年龄\",\r\n\t\t\"nickname\":\"请填写昵称\",\r\n\t}\r\n\tangular.element(document).ready(function(){\r\n\t\t$scope.item = $location.search().item;\r\n\t\t$scope.title = $scope.titleParams[$scope.item];\r\n\t\t$scope.tip = $scope.tipParams[$scope.item];\r\n\t\tif($scope.item==\"sex\"){\r\n\t\t\t$scope.hassex = true;\r\n\t\t\t$scope.val = \"男\";\r\n\t\t}else{\r\n\t\t\t$scope.hasinput = true;\r\n\t\t}\r\n\t\tTool.loadUserinfo($scope);\r\n\t})\r\n\t$scope.change = function(){\r\n\t\tif($scope.check()){\r\n\t\t\tvar url = Tool.getSession(\"host\")+\"/wx/mycount/updateUserInfo\";\r\n\t\t\tvar params = \"name=\"+$scope.item+\"&val=\"+$scope.val;\r\n\t\t\t$http.post(url,params,{\r\n\t\t\t\theaders:{\r\n\t\t\t\t\t'Content-type':'application/x-www-form-urlencoded;charset=UTF-8',\r\n\t\t\t\t\t\"accessToken\":$scope.userInfo.accessToken,\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.success(function(data){\r\n\t\t\t\tif(data.code==0){\r\n\t\t\t\t\tTool.setLocal(\"user\",data.data);\r\n\t\t\t\t\tTool.goPage(\"/new/htmls/userinfo.html\");\r\n\t\t\t\t}else if(data.code==1){\r\n\t\t\t\t\tTool.alert($scope,data.message);\r\n\t\t\t\t}\r\n\t\t\t}).error(function(){\r\n\t\t\t\tTool.alert($scope,\"数据更新失败!\");\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t$scope.check = function(){\r\n\t\tif($scope.val.length==0){\r\n\t\t\tTool.alert($scope,\"填写内容为空！\");\r\n\t\t\treturn false;\r\n\t\t}else if($scope.item==\"realname\"|$scope.item==\"nickname\"){\r\n\t\t\tif($scope.val.length>1&$scope.val.length<10){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tTool.alert($scope,\"请输入正确长度的名称！\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else if($scope.item==\"sex\"){\r\n\t\t\tif($scope.val==\"男\"||$scope.val==\"女\"){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tTool.alert($scope,\"请输入正确的性别！\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else if($scope.item==\"phone\"){\r\n\t\t\tif(/^1[3|4|5|7|8]\\d{9}$/.test($scope.val)){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tTool.alert($scope,\"请输入正确的手机号码!\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else if($scope.item==\"age\"){\r\n\t\t\tif(parseInt($scope.val)>0&&parseInt($scope.val)<150){\r\n\t\t\t\t$scope.val = parseInt($scope.val);\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tTool.alert($scope,\"请输入正确的年龄!\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tTool.alert($scope,\"未识别需要修改的项目,请稍后再试!\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t$scope.select = function(value){\r\n\t\tif(value==\"男\"){\r\n\t\t\tif(!$scope.sexparams.men){\r\n\t\t\t\t$scope.sexparams.men = true;\r\n\t\t\t\t$scope.sexparams.women = false;\r\n\t\t\t\t$scope.val = \"男\";\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}else if(value=\"女\"){\r\n\t\t\tif(!$scope.sexparams.women){\r\n\t\t\t\t$scope.sexparams.men = false;\r\n\t\t\t\t$scope.sexparams.women = true;\r\n\t\t\t\t$scope.val = \"女\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}])\r\n"],"sourceRoot":"/source/"}