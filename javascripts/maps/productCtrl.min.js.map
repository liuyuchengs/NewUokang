{"version":3,"sources":["productCtrl.min.js"],"names":["app","controller","$scope","$http","$location","Tool","Ajax","queryParams","city","area","professionId","itemId","order","currentPage","pageRows","location","loading","noProduct","noProductText","hasBg","hasLocation","hasOrder","hasArea","hasClass","menuParams","classes","orderParams","default","has","val","price","priceDesc","scoreDesc","countDesc","locationes","areaParams","futian","nanshan","luohu","baoan","longhua","longgang","yantian","classParams","productParams","yake","id","meirong","fck","zhongyi","title","products","init","loadHost","loadClassParams","initLocation","loadData","getSession","search","product","all","zzy","xiya","kcy","buya","baya","ycmr","jiaozheng","yichi","yzzl","qita","yanbu","mianbu","bibu","xiong","xizhi","simi","zhushe","jiguang","koucun","jiancha","fenmian","toubu","jianjing","yaobu","tuibu","quanshen","jingluo","other","hasProduct","window","onscroll","body","document","html","documentElement","height","Math","max","scrollHeight","offsetHeight","clientHeight","innerHeight","scrollY","loadNext","switchMenu","menu","areaSelect","params","select","orderSelect","locationInfo","longitude","latitude","classSelect","url","host","convertParams","post","headers","Content-type","success","data","length","mergeProdcut","concat","error","alert","items","forEach","item","priceunit","preferPriceType","pricetype","smallImg","detail","productId","hospitalId","flag","goPage","question"],"mappings":"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","file":"productCtrl.min.js","sourcesContent":["\tapp.controller(\"productCtrl\",[\"$scope\",\"$http\",\"$location\",\"Tool\",\"Ajax\",function($scope,$http,$location,Tool,Ajax){\n\t//查询条件\n\t$scope.queryParams = {\n\t\tcity:\"深圳\",\n\t\tarea:\"\",\n\t\tprofessionId:\"\",\n\t\titemId:\"\",\n\t\torder:\"\",\n\t\tcurrentPage:1,\n\t\tpageRows:10,\n\t\tlocation:\"\",\n\t}\n\t//动画变量\n\t$scope.loading = false;\n\t$scope.noProduct = false;\n\t$scope.noProductText = \"\";\n\t$scope.hasBg = false;\n\t$scope.hasLocation = false;\n\t//菜单切换变量\n\t$scope.hasOrder = false;\n\t$scope.hasArea = false;\n\t$scope.hasClass = false;\n\t//菜单项变量\n\t$scope.menuParams = {\n\t\tarea:false,\n\t\torder:false,\n\t\tclasses:false,\n\t}\n\t$scope.orderParams = {\n\t\tdefault:{has:true,val:\"\"},\n\t\tprice:{has:false,val:\"prefer_price asc\"},\n\t\tpriceDesc:{has:false,val:\"prefer_price desc\"},\n\t\tscoreDesc:{has:false,val:\"hospital_score asc\"},\n\t\tcountDesc:{has:false,val:\"sales desc\"},\n\t\tlocationes:{has:false,val:\"locationes\"}\n\t}\n\t$scope.areaParams = {\n\t\tdefault:{has:true,val:\"\"},\n\t\tfutian:{has:false,val:\"福田区\"},\n\t\tnanshan:{has:false,val:\"南山区\"},\n\t\tluohu:{has:false,val:\"罗湖区\"},\n\t\tbaoan:{has:false,val:\"宝安区\"},\n\t\tlonghua:{has:false,val:\"龙华新区\"},\n\t\tlonggang:{has:false,val:\"龙岗区\"},\n\t\tyantian:{has:false,val:\"盐田\"},\n\t}\n\t$scope.classParams = {};\n\t$scope.productParams = {\n\t\tyake:{has:false,val:\"牙科\",id:2},\n\t\tmeirong:{has:false,val:\"医学美容\",id:3},\n\t\tfck:{has:false,val:\"高端妇产科\",id:4},\n\t\tzhongyi:{has:false,val:\"中医理疗\",id:6}\n\t}\n\t$scope.title=\"\";\n\t$scope.products = [];\n\n\t//初始化\n\t$scope.init = function(){\n\t\tAjax.loadHost($scope,function(){\n\t\t\t$scope.loadClassParams();\n\t\t\t$scope.initLocation();\n\t\t\t$scope.loadData();\n\t\t})\n\t}\n\n\t/*\n\t** 加载地理信息\n\t*/\n\t$scope.initLocation = function(){\n\t\tif(Tool.getSession(\"locationInfo\")){\n\t\t\t$scope.hasLocation = true;\n\t\t}\n\t}\n\n\t/*\n\t** 加载分类信息\n\t*/\n\t$scope.loadClassParams = function(){\n\t\tif($location.search().product){\n\t\t\tvar product = $location.search().product;\n\t\t\t$scope.productParams[product].has = true;\n\t\t\t$scope.title = $scope.productParams[product].val;\n\t\t\t$scope.queryParams.professionId = $scope.productParams[product].id;\n\t\t\tswitch(product){\n\t\t\t\tcase \"yake\":\n\t\t\t\t\t$scope.classParams = {\n\t\t\t\t\t\tall:{has:true,id:\"\"},\n\t\t\t\t\t\tzzy:{has:false,id:19},\n\t\t\t\t\t\txiya:{has:false,id:20},\n\t\t\t\t\t\tkcy:{has:false,id:82},\n\t\t\t\t\t\tbuya:{has:false,id:22},\n\t\t\t\t\t\tbaya:{has:false,id:23},\n\t\t\t\t\t\tycmr:{has:false,id:24},\n\t\t\t\t\t\tjiaozheng:{has:false,id:64},\n\t\t\t\t\t\tyichi:{has:false,id:65},\n\t\t\t\t\t\tyzzl:{has:false,id:63},\n\t\t\t\t\t\tqita:{has:false,id:60},\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"meirong\":\n\t\t\t\t\t$scope.classParams = {\n\t\t\t\t\t\tall:{has:true,id:\"\"},\n\t\t\t\t\t\tyanbu:{has:false,id:7},\n\t\t\t\t\t\tmianbu:{has:false,id:8},\n\t\t\t\t\t\tbibu:{has:false,id:9},\n\t\t\t\t\t\txiong:{has:false,id:45},\n\t\t\t\t\t\txizhi:{has:false,id:12},\n\t\t\t\t\t\tsimi:{has:false,id:78},\n\t\t\t\t\t\tzhushe:{has:false,id:79},\n\t\t\t\t\t\tjiguang:{has:false,id:80},\n\t\t\t\t\t\tkoucun:{has:false,id:81},\n\t\t\t\t\t\tqita:{has:false,id:13},\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"fck\":\n\t\t\t\t\t$scope.classParams = {\n\t\t\t\t\t\tall:{has:true,id:\"\"},\n\t\t\t\t\t\tjiancha:{has:false,id:48},\n\t\t\t\t\t\tfenmian:{has:false,id:49}\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"zhongyi\":\n\t\t\t\t\t$scope.classParams = {\n\t\t\t\t\t\tall:{has:true,id:\"\"},\n\t\t\t\t\t\ttoubu:{has:false,id:51},\n\t\t\t\t\t\tjianjing:{has:false,id:52},\n\t\t\t\t\t\tyaobu:{has:false,id:53},\n\t\t\t\t\t\ttuibu:{has:false,id:54},\n\t\t\t\t\t\tquanshen:{has:false,id:55},\n\t\t\t\t\t\tjingluo:{has:false,id:56},\n\t\t\t\t\t\tqita:{has:false,id:57}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t$scope.classParams = {\n\t\t\t\t\t\tall:{has:true,id:\"\"},\n\t\t\t\t\t\tzzy:{has:false,id:19},\n\t\t\t\t\t\txiya:{has:false,id:20},\n\t\t\t\t\t\tkcy:{has:false,id:82},\n\t\t\t\t\t\tbuya:{has:false,id:22},\n\t\t\t\t\t\tbaya:{has:false,id:23},\n\t\t\t\t\t\tycmr:{has:false,id:24},\n\t\t\t\t\t\tjiaozheng:{has:false,id:64},\n\t\t\t\t\t\tyichi:{has:false,id:65},\n\t\t\t\t\t\tyzzl:{has:false,id:63},\n\t\t\t\t\t\tother:{has:false,id:60},\n\t\t\t\t\t};\n\t\t\t}\n\t\t}else{\n\t\t\t$scope.hasProduct[\"yake\"] = true;\n\t\t\t$scope.title = $scope.productParams[\"yake\"].val;\n\t\t\t$scope.queryParams.professionId = 2;\n\t\t}\n\t}\n\n\t/*\n\t** 滚动监听\n\t*/\n\twindow.onscroll = function(){\n\t\tif($scope.loading||$scope.noProduct){\n\t\t\treturn;\n\t\t}\n\t\tvar body = document.body;\n\t    var html = document.documentElement;\n\t\tvar height = Math.max( body.scrollHeight, body.offsetHeight,html.clientHeight, html.scrollHeight, html.offsetHeight );\n\t\tif(height>window.innerHeight){\n\t\t\tif (height - window.scrollY - window.innerHeight < 100) {\n\t\t\t\t$scope.loadNext();\n\t\t\t}\n\t\t}\n\t}\n\n\t/*\n\t** 下拉菜单切换\n\t*/\n\t$scope.switchMenu =function(menu){\n\t\tswitch(menu){\n\t\t\tcase \"area\":\n\t\t\t\tif($scope.hasOrder){\n\t\t\t\t\t$scope.hasOrder = false;\n\t\t\t\t\t$scope.menuParams.order = false;\n\t\t\t\t};\n\t\t\t\tif($scope.hasClass){\n\t\t\t\t\t$scope.hasClass = false;\n\t\t\t\t\t$scope.menuParams.classes = false;\n\t\t\t\t};\n\t\t\t\t$scope.hasArea = !$scope.hasArea;\n\t\t\t\tif($scope.hasArea){\n\t\t\t\t\t$scope.menuParams.area = true;\n\t\t\t\t}else{\n\t\t\t\t\t$scope.menuParams.area = false;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"order\":\n\t\t\t\tif($scope.hasArea){\n\t\t\t\t\t$scope.hasArea = false;\n\t\t\t\t\t$scope.menuParams.area = false;\n\t\t\t\t};\n\t\t\t\tif($scope.hasClass){\n\t\t\t\t\t$scope.hasClass = false;\n\t\t\t\t\t$scope.menuParams.classes = false;\n\t\t\t\t};\n\t\t\t\t$scope.hasOrder = !$scope.hasOrder;\n\t\t\t\tif($scope.hasOrder){\n\t\t\t\t\t$scope.menuParams.order = true;\n\t\t\t\t}else{\n\t\t\t\t\t$scope.menuParams.order = false;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"class\":\n\t\t\t\tif($scope.hasOrder){\n\t\t\t\t\t$scope.hasOrder = false;\n\t\t\t\t\t$scope.menuParams.order = false;\n\t\t\t\t};\n\t\t\t\tif($scope.hasArea){\n\t\t\t\t\t$scope.hasArea = false;\n\t\t\t\t\t$scope.menuParams.area = false;\n\t\t\t\t};\n\t\t\t\t$scope.hasClass = !$scope.hasClass;\n\t\t\t\tif($scope.hasClass){\n\t\t\t\t\t$scope.menuParams.classes = true;\n\t\t\t\t}else{\n\t\t\t\t\t$scope.menuParams.classes = false;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\tif($scope.hasOrder||$scope.hasArea||$scope.hasClass){\n\t\t\t$scope.hasBg = true;\n\t\t}else{\n\t\t\t$scope.hasBg = false;\n\t\t}\n\t}\n\n\t/*\n\t** 区域下拉菜单项点击\n\t*/\n\t$scope.areaSelect =function(params){\n\t\tTool.select(params,$scope.areaParams);\n\t\t$scope.queryParams.area = $scope.areaParams[params].val;\n\t\t$scope.queryParams.currentPage = 1;\n\t\t$scope.products = [];\n\t\t$scope.noProduct = false;\n\t\t$scope.loadData();\n\t\t$scope.switchMenu(\"area\");\n\t}\n\n\t/*\n\t** 排序下拉菜单项点击\n\t*/\n\t$scope.orderSelect = function(params){\n\t\tTool.select(params,$scope.orderParams);\n\t\t$scope.queryParams.order = $scope.orderParams[params].val;\n\t\t$scope.queryParams.currentPage = 1;\n\t\t$scope.products = [];\n\t\t$scope.noProduct = false;\n\t\t$scope.switchMenu(\"order\");\n\t\tif(params==\"locationes\"){\n\t\t\tvar locationInfo = Tool.getSession(\"locationInfo\");\n\t\t\t$scope.queryParams.location = locationInfo.longitude+\",\"+locationInfo.latitude;\n\t\t}else{\n\t\t\t$scope.queryParams.location = \"\";\n\t\t}\n\t\t$scope.loadData();\n\t}\n\n\t/*\n\t** 类别下拉菜单项点击\n\t*/\n\t$scope.classSelect = function(params){\n\t\tTool.select(params,$scope.classParams);\n\t\t$scope.queryParams.itemId = $scope.classParams[params].id;\n\t\t$scope.queryParams.currentPage = 1;\n\t\t$scope.products = [];\n\t\t$scope.noProduct = false;\n\t\t$scope.switchMenu(\"class\");\n\t\t$scope.loadData();\n\t}\n\n\t/*\n\t** 查询数据\n\t*/\n\t$scope.loadData = function(){\n\t\t$scope.loading = true;\n\t\tvar url = $scope.host+\"/wx/product/querylist\";\n\t\tvar params = Tool.convertParams($scope.queryParams);\n\t\t$http.post(url,params,{\n\t\t\theaders:{\n\t\t\t\t'Content-type':'application/x-www-form-urlencoded;charset=UTF-8',\n\t\t\t}\n\t\t}).success(function(data){\n\t\t\tif(data.length<1){\n\t\t\t\tif($scope.products.length<1){\n\t\t\t\t\t$scope.noProductText = \"没有项目信息,请选择其他区域或者时间!\";\n\t\t\t\t}else{\n\t\t\t\t\t$scope.noProductText = \"已经没有项目了!\";\n\t\t\t\t}\n\t\t\t\t$scope.noProduct = true;\n\t\t\t}else{\n\t\t\t\t$scope.mergeProdcut(data);\n\t\t\t\t$scope.products = $scope.products.concat(data);\n\t\t\t}\n\t\t\t$scope.loading = false;\n\t\t}).error(function(){\n\t\t\t$scope.loading = false;\n\t\t\t$scope.noProduct = true;\n\t\t\tTool.alert($scope,\"数据加载失败，请稍后再试!\");\n\t\t})\n\t}\n\n\t$scope.mergeProdcut = function(items){\n\t\titems.forEach(function(item){\n\t\t\tif(item.priceunit!=null&&item.priceunit!=\"\"){\n\t\t\t\titem.preferPriceType = item.pricetype+\"/\"+item.priceunit;\n\t\t\t}else{\n\t\t\t\titem.preferPriceType = item.pricetype;\n\t\t\t}\n\t\t\tif(item.smallImg==\"\"||item.smallImg==null){\n\t\t\t\titem.smallImg = \"../contents/img/p_default.png\";\n\t\t\t}\n\t\t})\n\t}\n\n\t/*\n\t** 加载下一页数据\n\t*/\n\t$scope.loadNext = function(){\n\t\t$scope.queryParams.currentPage++;\n\t\t$scope.loadData();\n\t}\n\n\t/*\n\t** 跳转到详细页面\n\t*/\n\t$scope.detail = function(productId,hospitalId,flag){\n\t\tvar url = \"/new/htmls/product-detail.html#?flag=1&productId=\"+productId+\"&hospitalId=\"+hospitalId;\n\t\tTool.goPage(url);\n\t}\n\n\t/*\n\t** 疑问按钮处理函数\n\t*/\n\t$scope.question = function(){\n\t\tTool.alert($scope,\"如有疑问，请致电0755-26905699\");\n\t}\n}])\n"],"sourceRoot":"/source/"}