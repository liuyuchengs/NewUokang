{"version":3,"sources":["app.js"],"names":["define","angular","wx","loadController","obj","$controllerProvider","$q","deferred","defer","require","url","controller","$inject","inject","register","name","resolve","promise","app","module","run","$rootScope","$location","navMenuParams","home","doctor","interaction","user","hasNav","loading","message","hasCancel","hasComfirm","hasTip","comfirm","cancel","hasBgColor","switchNavMenu","item","index","menuClick","path","$on","changeRoute","query","search","config","$routeProvider","when","templateUrl","askDoctor","userinfo","activity","otherwise","redirectTo","directive","fallbackSrc","link","scope","iElement","iAttrs","bind","element","this","attr","restrict","$scope","imgUrl","userError","filter","input","sex","undefined","type","service","$http","Tool","get","defered","headers","success","data","error","reject","post","Content-type","params","convertParams","host","userInfo","getLocal","key","JSON","parse","localStorage","getItem","setLocal","value","setItem","stringify","removeLocal","removeItem","clearLocal","clear","getSession","sessionStorage","setSession","removeSession","goUrl","length","location","href","checkLogin","isUserInfoComplete","realname","age","phone","select","proto","has","alert","mess","callback","loadUserinfo","property","slice","noWindowListen","window","onscroll","getQueryString","reg","RegExp","r","substr","match","unescape","Ajax","wxInit","ready","checkJsApi","jsApiList","result","checkResult","getLocation","chooseWXPay","res","locationInfo","latitude","longitude","fail","wxConfig","debug","appId","timestamp","nonceStr","signature","encodeURIComponent","then","wxShare","onMenuShareTimeline","title","onMenuShareAppMessage","desc","dataUrl","onMenuShareQQ","onMenuShareQZone","onMenuShareWeibo","wxCheckPayParams","signType","paySign","wxPay","orderId","code","package","payType","accessToken","timeStamp","sign","defaultParams","default","id","areaParams","val","futian","nanshan","luohu","baoan","longhua","longgang","yantian","yakeParams","all","zzy","xiya","kcy","buya","baya","ycmr","jiaozheng","yichi","yzzl","qita","meirongParams","yanbu","mianbu","bibu","xiong","xizhi","simi","zhushe","jiguang","koucun","fckParams","jiancha","fenmian","zhongyiParams","toubu","jianjing","yaobu","tuibu","quanshen","jingluo","tijianParams","shangye","changgui","zhongnian","laonian","ruzhi","yunqian","qingnian","ertong","manbing","professionalParams","proId","yake","meirong","fck","zhongyi","tijian","Weixin","items","currentPage","noProduct","noProductText","banners","imgStyle","width","screen","gotoMenu","goPage","init","loadRecommend","queryBanner","initSwiper","city","jsonp","status","address_component","body","document","html","documentElement","height","Math","max","scrollHeight","offsetHeight","clientHeight","innerHeight","scrollY","loadNext","mergeProdcut","concat","forEach","priceunit","preferPriceType","pricetype","samllimg","mergeBanner","Swiper","loop","pagination","autoplay","autoplayDisableOnInteraction","observeParents","observer","onSlideChangeEnd","swiper","activeIndex","stopAutoplay","setTimeout","startAutoplay","detail","productId","hospitalId","Params","hasBg","profValue","profItemValue","doctors","orderParams","score","queryParams","professionId","itemid","orderby","area","pageRows","menuParams","order","professional","loadDoctor","switchMenu","menu","switchObj","selectMenu","ob","resetDate","selectProfression","selectProfressionItem","pro","mergeDoctor","sales","hasInteractionMenu","flag","navParams","kanya","shumei","yunsheng","posts","queryPost","mergePost","visitNum","commentNum","list2","splice","switchNav","isLogin","initText","queryFocus","nickname","face","tip","countFocusMan","countFansMan"],"mappings":"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","file":"app.js","sourcesContent":["/**\r\n * myApp模块,所有服务打包在一起，减少http请求\r\n */\r\ndefine([\"angular\",\"wx\"],function(angular,wx){\r\n    /**\r\n     * 定义模块和$rootScope\r\n     */\r\n    var app = angular.module(\"myApp\",[\"ngRoute\"]);\r\n    app.run([\"$rootScope\",\"$location\",function($rootScope,$location){\r\n        //导航栏样式参数\r\n        $rootScope.navMenuParams = {\r\n            home:false,\r\n            doctor:false,\r\n            interaction:false,\r\n            user:false,\r\n        }\r\n        $rootScope.hasNav = false;\r\n        //加载框参数\r\n        $rootScope.loading = false;\r\n        //提示框参数\r\n        $rootScope.message = null;\r\n        $rootScope.hasCancel = null;\r\n        $rootScope.hasComfirm = null;\r\n        $rootScope.hasTip = null;\r\n        $rootScope.comfirm = null;\r\n        $rootScope.cancel = null;\r\n        //body背景色\r\n        $rootScope.hasBgColor = false;\r\n\r\n        //获取url决定导航栏样式\r\n        $rootScope.switchNavMenu = function(item){\r\n            for(var index in $rootScope.navMenuParams){\r\n                if(index===item){\r\n                    $rootScope.navMenuParams[item] = true;\r\n                }else{\r\n                    $rootScope.navMenuParams[index] = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        //导航栏菜单处理事件\r\n        $rootScope.menuClick = function(item){\r\n            $location.path(item);  \r\n        }\r\n\r\n        //路由改变时触发\r\n        $rootScope.$on(\"$routeChangeStart\",function(){\r\n            $rootScope.loading = true;\r\n            if($location.path()===\"/home\"){\r\n                $rootScope.switchNavMenu(\"home\");\r\n                $rootScope.hasNav = true;\r\n            }else if($location.path()===\"/doctor\"){\r\n                $rootScope.switchNavMenu(\"doctor\");\r\n                $rootScope.hasNav = true;\r\n            }else if($location.path()===\"/interaction\"){\r\n                $rootScope.switchNavMenu(\"interaction\");\r\n                $rootScope.hasNav = true;\r\n            }else if($location.path()===\"/user\"){\r\n                $rootScope.switchNavMenu(\"user\");\r\n                $rootScope.hasNav = true;\r\n            }else{\r\n                $rootScope.hasNav = false;\r\n            }\r\n        })\r\n\r\n        //路由改变完成后触发\r\n        $rootScope.$on(\"$routeChangeSuccess\",function(){\r\n            $rootScope.loading = false;\r\n        })\r\n\r\n        //后台按钮处理时间\r\n        $rootScope.changeRoute = function(path,query){\r\n            $location.path(path);\r\n            if(query){\r\n                $location.search(query);\r\n            }else{\r\n                $location.search(\"\");\r\n            }\r\n        }\r\n    }])\r\n\r\n    /**\r\n     * 路由部分\r\n     */\r\n\r\n    //配置路由\r\n    app.config([\"$routeProvider\",\"$controllerProvider\",function($routeProvider,$controllerProvider){\r\n        $routeProvider.when(\"/home\",{\r\n            templateUrl:\"home.html\",\r\n            controller:\"homeCtrl\",\r\n            /*resolve:{\r\n                home: loadController({\r\n                    url:\"../javascripts/dest/controller/home.js\",\r\n                    name:\"homeCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$http\",\"Tool\",\"Ajax\",\"Weixin\"],   \r\n                },$controllerProvider)\r\n            }*/\r\n        }).when(\"/doctor\",{\r\n            templateUrl:\"doctor.html\",\r\n            controller:\"doctorCtrl\",\r\n            /*resolve:{\r\n                doctor: loadController({\r\n                    url:\"../javascripts/dest/controller/doctor.js\",\r\n                    name:\"doctorCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$http\",\"Tool\",\"Ajax\",\"Params\"],   \r\n                },$controllerProvider)\r\n            }*/\r\n        }).when(\"/doctor/askDoctor\",{\r\n            templateUrl:\"askdoctor.html\",\r\n            controller:\"askDoctorCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/askDoctor.js\",\r\n                    name:\"askDoctorCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"$http\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/doctor/detail\",{\r\n            templateUrl:\"doctordetail.html\",\r\n            controller:\"doctorDetailCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/doctorDetail.js\",\r\n                    name:\"doctorDetailCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"$anchorScroll\",\"Ajax\",\"Tool\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/interaction\",{\r\n            templateUrl:\"interaction.html\",\r\n            controller:\"interactionCtrl\",\r\n            /*resolve:{\r\n                interaction: loadController({\r\n                    url:\"../javascripts/dest/controller/interaction.js\",\r\n                    name:\"interactionCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$http\",\"Tool\",\"Ajax\"],   \r\n                },$controllerProvider)\r\n            }*/\r\n        }).when(\"/interaction/detail\",{\r\n            templateUrl:\"interactiondetail.html\",\r\n            controller:\"interactionDetailCtrl\",\r\n            resolve:{\r\n                interaction: loadController({\r\n                    url:\"../javascripts/dest/controller/interactionDetail.js\",\r\n                    name:\"interactionDetailCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Tool\",\"Ajax\"],   \r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/user\",{\r\n            templateUrl:\"user.html\",\r\n            controller:\"userCtrl\",\r\n            /*resolve:{\r\n                interaction: loadController({\r\n                    url:\"../javascripts/dest/controller/user.js\",\r\n                    name:\"userCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Tool\",\"Ajax\"],   \r\n                },$controllerProvider)\r\n            }*/\r\n        }).when(\"/user/userinfo\",{\r\n            templateUrl:\"userinfo.html\",\r\n            controller:\"userInfoCtrl\",\r\n            resolve:{\r\n                userinfo:loadController({\r\n                    url:\"../javascripts/dest/controller/userInfo.js\",\r\n                    name:\"userInfoCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"Tool\",\"Ajax\"],   \r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/user/cush\",{\r\n            templateUrl:\"cush.html\",\r\n            controller:\"cushCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/cush.js\",\r\n                    name:\"cushCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/user/cush/read\",{\r\n            templateUrl:\"cushreadme.html\",\r\n            controller:\"cushCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/cush.js\",\r\n                    name:\"cushCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/user/cushover\",{\r\n            templateUrl:\"cushover.html\",\r\n            controller:\"cushOverCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/cushOver.js\",\r\n                    name:\"cushOverCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/user/userinfochange\",{\r\n            templateUrl:\"userinfochange.html\",\r\n            controller:\"userInfoChangeCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/userInfoChange.js\",\r\n                    name:\"userInfoChangeCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"$timeout\",\"$http\",\"Ajax\",\"Tool\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/user/order\",{\r\n            templateUrl:\"order.html\",\r\n            controller:\"userOrderCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/order.js\",\r\n                    name:\"userOrderCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Ajax\",\"Tool\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/activity\",{\r\n            templateUrl:\"activity.html\",\r\n            controller:\"activityCtrl\",\r\n            resolve:{\r\n                activity:loadController({\r\n                    url:\"../javascripts/dest/controller/activity.js\",\r\n                    name:\"activityCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"Tool\",\"Ajax\"],   \r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/product/detail\",{\r\n            templateUrl:\"productdetail.html\",\r\n            controller:\"productDetailCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/productDetail.js\",\r\n                    name:\"productDetailCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"$http\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/product\",{\r\n            templateUrl:\"product.html\",\r\n            controller:\"productCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/product.js\",\r\n                    name:\"productCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/exam/detail\",{\r\n            templateUrl:\"examdetail.html\",\r\n            controller:\"examDetailCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/examDetail.js\",\r\n                    name:\"examDetailCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/discount\",{\r\n            templateUrl:\"discount.html\",\r\n            controller:\"discountCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/discount.js\",\r\n                    name:\"discountCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/findpwd/phone\",{\r\n            templateUrl:\"findpwdphone.html\",\r\n            controller:\"findPassCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/findPass.js\",\r\n                    name:\"findPassCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"$interval\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/findpwd/code\",{\r\n            templateUrl:\"findpwdcode.html\",\r\n            controller:\"findPassCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/findPass.js\",\r\n                    name:\"findPassCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"$interval\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/findpwd/pwd\",{\r\n            templateUrl:\"findpwdpwd.html\",\r\n            controller:\"findPassCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/findPass.js\",\r\n                    name:\"findPassCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"$interval\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/grab\",{\r\n            templateUrl:\"grab.html\",\r\n            controller:\"grabCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/grab.js\",\r\n                    name:\"grabCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$window\",\"$location\",\"Tool\",\"Ajax\",\"Weixin\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/grab/code\",{\r\n            templateUrl:\"grabcode.html\",\r\n            controller:\"grabCodeCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/grabCode.js\",\r\n                    name:\"grabCodeCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/grab/order\",{\r\n            templateUrl:\"graborder.html\",\r\n            controller:\"grabOrderCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/grabOrder.js\",\r\n                    name:\"grabOrderCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/login\",{\r\n            templateUrl:\"login.html\",\r\n            controller:\"loginCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/login.js\",\r\n                    name:\"loginCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Ajax\",\"Tool\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/makeorder\",{\r\n            templateUrl:\"makeorder.html\",\r\n            controller:\"makeOrderCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/makeOrder.js\",\r\n                    name:\"makeOrderCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/news\",{\r\n            templateUrl:\"news.html\",\r\n            controller:\"newsCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/news.js\",\r\n                    name:\"newsCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/news/detail\",{\r\n            templateUrl:\"newsdetail.html\",\r\n            controller:\"newsCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/news.js\",\r\n                    name:\"newsCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/order\",{\r\n            templateUrl:\"order.html\",\r\n            controller:\"orderCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/order.js\",\r\n                    name:\"orderCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Ajax\",\"Tool\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/pay\",{\r\n            templateUrl:\"pay.html\",\r\n            controller:\"payCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/pay.js\",\r\n                    name:\"payCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Tool\",\"Weixin\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/pay/result\",{\r\n            templateUrl:\"payresult.html\",\r\n            controller:\"payResultCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/payResult.js\",\r\n                    name:\"payResultCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Tool\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/register\",{\r\n            templateUrl:\"register.html\",\r\n            controller:\"registerCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/register.js\",\r\n                    name:\"registerCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"$interval\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/agreement\",{\r\n            templateUrl:\"agreement.html\",\r\n        }).when(\"/write\",{\r\n            templateUrl:\"write.html\",\r\n            controller:\"writeCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/write.js\",\r\n                    name:\"writeCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$http\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/write/say\",{\r\n            templateUrl:\"writesay.html\",\r\n            controller:\"writeCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/write.js\",\r\n                    name:\"writeCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$http\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/write/note\",{\r\n            templateUrl:\"writenote.html\",\r\n            controller:\"writeCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/write.js\",\r\n                    name:\"writeCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$http\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/user/mypost\",{\r\n            templateUrl:\"mypost.html\",\r\n            controller:\"myPostCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/myPost.js\",\r\n                    name:\"myPostCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Ajax\",\"Tool\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/user/mymessage\",{\r\n            templateUrl:\"mymessage.html\",\r\n            controller:\"myMessageCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/myMessage.js\",\r\n                    name:\"myMessageCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/user/myfollow\",{\r\n            templateUrl:\"myfollow.html\",\r\n            controller:\"myFollowCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/myFollow.js\",\r\n                    name:\"myFollowCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/exam\",{\r\n            templateUrl:\"exam.html\",\r\n            controller:\"examCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/exam.js\",\r\n                    name:\"examCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/invite/new\",{\r\n            templateUrl:\"invitenew.html\",\r\n            controller:\"inviteCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/invite.js\",\r\n                    name:\"inviteCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Tool\",\"Ajax\",\"Weixin\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/invite/register\",{\r\n            templateUrl:\"inviteregister.html\",\r\n            controller:\"inviteCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/invite.js\",\r\n                    name:\"inviteCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"$location\",\"Tool\",\"Ajax\",\"Weixin\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/invite/notes\",{\r\n            templateUrl:\"invitenotes.html\",\r\n            controller:\"inviteNotesCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/inviteNotes.js\",\r\n                    name:\"inviteNotesCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        }).when(\"/user/paymoney\",{\r\n            templateUrl:\"paymoney.html\",\r\n            controller:\"payMoneyCtrl\",\r\n            resolve:{\r\n                askDoctor:loadController({\r\n                    url:\"../javascripts/dest/controller/payMoney.js\",\r\n                    name:\"payMoneyCtrl\",\r\n                    inject:[\"$scope\",\"$rootScope\",\"Tool\",\"Ajax\"],\r\n                },$controllerProvider)\r\n            }\r\n        })\r\n        .otherwise({redirectTo:\"/home\"})\r\n    }])\r\n\r\n    //将require的控制器注册到Module中\r\n    function loadController(obj,$controllerProvider){\r\n        return function($q){\r\n            var deferred = $q.defer();\r\n            require([obj.url],function(controller){\r\n                controller.$inject = obj.inject;\r\n                $controllerProvider.register(obj.name,controller);\r\n                deferred.resolve();\r\n            })\r\n            return deferred.promise;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 指令区域\r\n     */\r\n\r\n    // 图片加载失败后，使用设置的图片\r\n    app.directive('fallbackSrc', function () {\r\n        var fallbackSrc = {\r\n            link: function postLink(scope, iElement, iAttrs) {\r\n            iElement.bind('error', function() {\r\n                angular.element(this).attr(\"src\", iAttrs.fallbackSrc);\r\n            });\r\n            }\r\n        }\r\n        return fallbackSrc;\r\n    });\r\n\r\n    // 项目图片加载失败后，使用默认图片\r\n    app.directive(\"productError\",function(){\r\n        return {\r\n            restrict:\"A\",\r\n            link:function(scope,iElement,iAttrs){\r\n                iElement.bind(\"error\",function(){\r\n                    angular.element(this).attr(\"src\",\"../contents/img/p_default.png\");\r\n                })\r\n            }\r\n        }\r\n    })\r\n\r\n    // 医生图片加载失败后，使用默认图片\r\n    app.directive(\"doctorError\",function(){\r\n        return {\r\n            restrict:\"A\",\r\n            link:function(scope,iElement,iAttrs){\r\n                iElement.bind(\"error\",function(){\r\n                    angular.element(this).attr(\"src\",\"../contents/img/doc-head.png\");\r\n                })\r\n            }\r\n        }\r\n    })\r\n\r\n    // 用户头像加载失败后，使用默认图片\r\n    app.directive(\"userError\",function(){\r\n        return {\r\n            restrict:\"A\",\r\n            link:function($scope,iElement,iAttrs){\r\n                iElement.bind(\"error\",function(){\r\n                    var imgUrl = \"../contents/img/men-head.png\";\r\n                    if(iAttrs.userError){\r\n                        if(iAttrs.userError===\"女\"){\r\n                            imgUrl = \"../contents/img/women-head.png\"\r\n                        }\r\n                    }\r\n                    angular.element(this).attr(\"src\",imgUrl);\r\n                })\r\n            }\r\n        }\r\n    })\r\n\r\n    /**\r\n     * 过滤器部分\r\n     */\r\n\r\n    // 设置默认的头像\r\n    app.filter(\"defaultHeadImg\",function(){\r\n        return function(input,sex){\r\n            if(input===null||input===\"\"){\r\n                if(sex===\"男\"||sex===null||sex===\"\"||sex===undefined){\r\n                    input = \"../contents/img/men-head.png\";\r\n                }else{\r\n                    input = \"../contents/img/women-head.png\";\r\n                }\r\n            }\r\n            return input;\r\n        }\r\n    })\r\n    \r\n    // 设置默认图片\r\n    app.filter(\"defaultImg\",function(){\r\n        return function(input,type){\r\n            if(input==null||input==\"\"){\r\n                if(type===\"doc\"){\r\n                    input = \"../contents/img/doc-head.png\";\r\n                }\r\n                if(type===\"pro\"){\r\n                    input = \"../contents/img/p_default.png\"\r\n                }\r\n            }\r\n            return input;\r\n        }\r\n    })\r\n\r\n    /**\r\n     * 服务部分\r\n     */\r\n\r\n     // 数据访问服务\r\n    app.service(\"Ajax\",[\"$rootScope\",\"$http\",\"$q\",\"Tool\",function($rootScope,$http,$q,Tool){\r\n        //使用promise封装ajax\r\n        this.get = function (obj) {\r\n                if (obj.url) {\r\n                    $rootScope.loading = true;\r\n                    var defered = $q.defer();\r\n                    $http.get(obj.url,{\r\n                        headers:obj.headers,\r\n                    }).success(function (data) {\r\n                        return defered.resolve(data);\r\n                    }).error(function (data) {\r\n                        return defered.reject(data);\r\n                    });\r\n                    return defered.promise;\r\n                }\r\n            };\r\n        this.post = function (obj) {\r\n            if (obj.url) {\r\n                var defered = $q.defer();\r\n                if(obj.headers) {\r\n                    if(!obj.headers[\"Content-type\"]){\r\n                        obj.headers[\"Content-type\"] = 'application/x-www-form-urlencoded;charset=UTF-8';\r\n                    }\r\n                }else{\r\n                    obj.headers = {\r\n                        'Content-type': 'application/x-www-form-urlencoded;charset=UTF-8',\r\n                    };\r\n                }\r\n                $rootScope.loading = true;\r\n                //将参数对象转换成参数字符串\r\n                obj.params = Tool.convertParams(obj.params);\r\n                $http.post(obj.url, obj.params, {\r\n                    headers: obj.headers\r\n                }).success(function (data) {\r\n                    defered.resolve(data);\r\n                }).error(function (data) {\r\n                    defered.reject(data);\r\n                });\r\n                return defered.promise;\r\n            }\r\n        };\r\n    }]);\r\n\r\n    // 工具服务\r\n    app.service(\"Tool\",[\"$rootScope\",\"$location\",function($rootScope,$location){\r\n        \r\n        //变量\r\n        this.host = \"http://192.168.0.102:3000\";\r\n        //this.host = \"https://192.168.0.222:8555/www\"\r\n        //this.host = \"https://www.uokang.com\";\r\n        this.userInfo = {};\r\n\r\n        /*\r\n        ** 操作localStorage和sessionStorage\r\n        */\r\n        this.getLocal = function(key){\r\n            return JSON.parse(localStorage.getItem(key));\r\n        };\r\n        this.setLocal = function(key,value){\r\n            localStorage.setItem(key,JSON.stringify(value));\r\n        };\r\n        this.removeLocal = function(key){\r\n            localStorage.removeItem(key);\r\n        };\r\n        this.clearLocal = function(){\r\n            localStorage.clear();\r\n        }\r\n        this.getSession = function(key){\r\n            return JSON.parse(sessionStorage.getItem(key));\r\n        }\r\n        this.setSession = function(key,value){\r\n            sessionStorage.setItem(key,JSON.stringify(value));\r\n        }\r\n        this.removeSession = function(key){\r\n            sessionStorage.removeItem(key);\r\n        }\r\n        //跳转到指定url\r\n        this.goUrl = function(url){\r\n            if(url.length>0){\r\n                location.href = url;\r\n            }\r\n        }\r\n\r\n        //改变路由\r\n        this.changeRoute = function(path,search){\r\n            $location.path(path);\r\n            if(search){\r\n                $location.search(search);\r\n            }else{\r\n                $location.search(\"\");\r\n            }\r\n        }\r\n\r\n        //判断是否登录\r\n        this.checkLogin = function(){\r\n            if(this.getLocal(\"user\")){\r\n                return true;\r\n            }else{\r\n                return false;\r\n            }\r\n        }\r\n\r\n        //判断是否完成用户信息\r\n        this.isUserInfoComplete = function(){\r\n            var userInfo = this.getLocal(\"user\");\r\n            if(userInfo.realname==\"\"||userInfo.realname==null||userInfo.sex==\"\"||userInfo.sex==null||userInfo.age==\"\"||userInfo.age==null||userInfo.phone==\"\"||userInfo.phone==null){\r\n                return false;\r\n            }else{\r\n                return true;\r\n            }\r\n        }\r\n        this.select = function(params,obj){\r\n            for(var proto in obj){\r\n                if(proto==params){\r\n                    if(!obj[params].has){\r\n                        obj[params].has = true;\r\n                    }\r\n                }else{\r\n                    if(obj[proto].has){\r\n                        obj[proto].has = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        //确认按钮的提示框\r\n        this.alert = function(mess,callback){\r\n            $rootScope.message = mess;\r\n            $rootScope.hasCancel = false;\r\n            $rootScope.hasComfirm = true;\r\n            $rootScope.hasTip = true;\r\n            if(callback){\r\n                $rootScope.comfirm = callback;\r\n            }else{\r\n                $rootScope.comfirm = function(){\r\n                    $rootScope.hasTip = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        //确认和取消按钮的提示框\r\n        this.comfirm = function(mess,callback){\r\n            $rootScope.message = mess;\r\n            $rootScope.hasCancel = true;\r\n            $rootScope.hasComfirm = true;\r\n            $rootScope.hasTip = true;\r\n            $rootScope.cancel = function(){\r\n                $rootScope.hasTip = false;\r\n            }\r\n            $rootScope.comfirm = callback;\r\n        }\r\n\r\n        //获取用户信息\r\n        this.loadUserinfo = function(){\r\n            this.userInfo = this.getLocal(\"user\");\r\n        }\r\n\r\n        //将对象转换成查询字符串\r\n        this.convertParams = function(obj){\r\n            var params = \"\";\r\n            for(var property in obj){\r\n                if(obj[property]!=null){\r\n                    params += property+\"=\"+obj[property]+\"&\";\r\n                }\r\n            }\r\n            //截取掉最后一个\"&\"\r\n            params = params.slice(0,params.length-1);\r\n            return params;\r\n        }\r\n\r\n        //不监听window滚动\r\n        this.noWindowListen = function(){\r\n            window.onscroll = null;\r\n        }\r\n\r\n        this.getQueryString = function(name){\r\n            var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');\r\n            var r = window.location.search.substr(1).match(reg);\r\n            if (r != null) {\r\n                return unescape(r[2]);\r\n            }\r\n            return null;\r\n        }\r\n    }])\r\n\r\n    // 微信服务\r\n    app.service(\"Weixin\",[\"$rootScope\",\"Ajax\",\"Tool\",function($rootScope,Ajax,Tool){\r\n        //初始化完成后，检查客户端版本 --first--\r\n        this.wxInit = function($scope,callback){\r\n            //wx初始化后检查客户端\r\n            wx.ready(function(){\r\n                wx.checkJsApi({\r\n                    //需要检测的JS接口列表\r\n                    jsApiList: ['getLocation','chooseWXPay','onMenuShareTimeline','onMenuShareAppMessage','onMenuShareQQ','onMenuShareQZone','onMenuShareWeibo'],\r\n                    success: function(result) {\r\n                        //以键值对的形式返回，可用的api值true，不可用为false\r\n                        if(!result.checkResult.getLocation||!result.checkResult.chooseWXPay){\r\n                            Tool.alert(\"客户端版本过低，请微信升级客户端!\");\r\n                        }\r\n                    }\r\n                })\r\n                if(callback){\r\n                    wx.getLocation({\r\n                        type:\"wgs84\",\r\n                        success:function(res){\r\n                            var locationInfo = {\r\n                                latitude:res.latitude, //维度\r\n                                longitude:res.longitude //经度\r\n                            }\r\n                            Tool.setSession(\"locationInfo\",locationInfo);\r\n                            callback(locationInfo.latitude,locationInfo.longitude);\r\n                        },\r\n                        fail:function(){\r\n                            $scope.locationInfo = \"定位失败\";\r\n                        }\r\n                    });\r\n                }\r\n            })\r\n        }\r\n\r\n        //初始化wx对象 --second--\r\n        this.wxConfig = function(scope){\r\n            var params = {\r\n                debug:false,\r\n                appId : \"\",\r\n                timestamp : \"\",\r\n                nonceStr : \"\",\r\n                signature : \"\",\r\n                jsApiList : ['getLocation','chooseWXPay','onMenuShareTimeline','onMenuShareAppMessage','onMenuShareQQ','onMenuShareQZone','onMenuShareWeibo'],\r\n            };\r\n            Ajax.post({\r\n                url:Tool.host+\"/weixin/check/getjsconfig\",\r\n                params: {url:encodeURIComponent(location.href)},\r\n            }).then(function(data){\r\n                params.appId = data.appId;\r\n                params.timestamp = data.timestamp;\r\n                params.nonceStr = data.nonceStr;\r\n                params.signature = data.signature;\r\n                wx.config(params);\r\n            }).catch(function(){\r\n                Tool.alert(\"初始化WX对象失败，请稍后再试！\");\r\n            }).finally(function(){\r\n                $rootScope.loading =false;\r\n            })\r\n        }\r\n\r\n        //自定义分享内容,可分享至微信好友，微信朋友圈，qq好友，qq空间，腾讯微博\r\n        this.wxShare = function(obj){\r\n            /**\r\n             * title:分享标题, desc:分享描述, link:分享链接, imgUrl:分享图标, type：分享类型，默认为link， dataUrl：分享数据的连接\r\n             */\r\n            wx.onMenuShareTimeline({\r\n                title: obj.title,\r\n                link: obj.link,\r\n                imgUrl: obj.imgUrl,\r\n                success: obj.success,\r\n                cancel: obj.cancel,\r\n            });\r\n            wx.onMenuShareAppMessage({\r\n                title: obj.title,\r\n                desc: obj.desc,\r\n                link: obj.link,\r\n                imgUrl: obj.imgUrl,\r\n                type: obj.type,\r\n                dataUrl: obj.dataUrl,\r\n                success:obj.success,\r\n                cancel: obj.cancel\r\n            });\r\n            wx.onMenuShareQQ({\r\n                title: obj.title,\r\n                desc: obj.desc,\r\n                link: obj.link,\r\n                imgUrl: obj.imgUrl,\r\n                success:obj.success,\r\n                cancel:obj.cancel\r\n            });\r\n            wx.onMenuShareQZone({\r\n                title: obj.title,\r\n                desc: obj.desc,\r\n                link: obj.link,\r\n                imgUrl: obj.imgUrl,\r\n                success: obj.success,\r\n                cancel:obj.cancel,\r\n            });\r\n            wx.onMenuShareWeibo({\r\n                title: obj.title,\r\n                desc: obj.desc,\r\n                link: obj.link,\r\n                imgUrl: obj.imgUrl,\r\n                success: obj.success,\r\n                cancel: obj.cancel,\r\n            });\r\n        }\r\n\r\n        //检查微信支付的参数是否完整\r\n        this.wxCheckPayParams = function(params){\r\n            if(params.timestamp==\"\"||params.timestamp==null||params.nonceStr==\"\"||params.nonceStr==null||params.package==\"\"||params.package==null||params.signType==\"\"||params.signType==null||params.paySign==\"\"||params.paySign==null){\r\n                return false;\r\n            }else{\r\n                return true;\r\n            }\r\n        }\r\n\r\n        //获取支付参数，并发起支付\r\n        this.wxPay = function(orderId,code){\r\n            var params = {\r\n                timestamp: \"\",\r\n                nonceStr: '',\r\n                package: '',\r\n                signType: '',\r\n                paySign: '',\r\n                success:function() {\r\n                    window.location.href = \"https://www.uokang.com/v2/htmls/index.html#/pay/result?payResult=success\";\r\n                },\r\n                cancel:function(){\r\n                    window.location.href = \"https://www.uokang.com/v2/htmls/index.html#/pay/result?payResult=fail\";\r\n                },\r\n                fail:function(){\r\n                    window.location.href = \"https://www.uokang.com/v2/htmls/index.html#/pay/result?payResult=fail\";\r\n                }\r\n            };\r\n            if(orderId!=\"\"&orderId!=null){\r\n                var url = Tool.host+\"/wx/order/weixin\";\r\n                var params = {payType:\"JSAPI\",orderId:orderId,\"code\":code};\r\n                Ajax.post({\r\n                    url:url,\r\n                    params:params,\r\n                    headers:{\r\n                        'accessToken':Tool.getLocal(\"user\").accessToken,\r\n                    }\r\n                }).then(function(data){\r\n                    params.timestamp = data.data.timeStamp;\r\n                    params.nonceStr = data.data.nonceStr;\r\n                    params.package = data.data.package;\r\n                    params.signType = \"MD5\";\r\n                    params.paySign = data.data.sign;\r\n                    if(params.timestamp==\"\"||params.timestamp==null||params.nonceStr==\"\"||params.nonceStr==null||params.package==\"\"||params.package==null||params.signType==\"\"||params.signType==null||params.paySign==\"\"||params.paySign==null){\r\n                        Tool.alert(\"请求支付参数失败，请稍后再试!\");\r\n                    }else{\r\n                        wx.chooseWXPay(params);\r\n                    }\r\n                }).catch(function(){\r\n                    Tool.alert(\"请求支付参数失败，请稍后再试!\");\r\n                }).finally(function(){\r\n                    $rootScope.loading = false;\r\n                })\r\n            }\r\n        }\r\n    }])\r\n\r\n    // 存储菜单变量\r\n    app.service(\"Params\",function(){\r\n        this.defaultParams = {\r\n            default:{has:true,id:\"\"}\r\n        }\r\n        this.areaParams = {\r\n            default:{has:true,val:\"\"},\r\n            futian:{has:false,val:\"福田区\"},\r\n            nanshan:{has:false,val:\"南山区\"},\r\n            luohu:{has:false,val:\"罗湖区\"},\r\n            baoan:{has:false,val:\"宝安区\"},\r\n            longhua:{has:false,val:\"龙华新区\"},\r\n            longgang:{has:false,val:\"龙岗区\"},\r\n            yantian:{has:false,val:\"盐田区\"},\r\n        }\r\n        this.yakeParams = {\r\n            all:{has:true,id:\"\"},\r\n            zzy:{has:false,id:19},\r\n            xiya:{has:false,id:20},\r\n            kcy:{has:false,id:82},\r\n            buya:{has:false,id:22},\r\n            baya:{has:false,id:23},\r\n            ycmr:{has:false,id:24},\r\n            jiaozheng:{has:false,id:64},\r\n            yichi:{has:false,id:65},\r\n            yzzl:{has:false,id:63},\r\n            qita:{has:false,id:60},\r\n        };\r\n        this.meirongParams = {\r\n            all:{has:true,id:\"\"},\r\n            yanbu:{has:false,id:7},\r\n            mianbu:{has:false,id:8},\r\n            bibu:{has:false,id:9},\r\n            xiong:{has:false,id:45},\r\n            xizhi:{has:false,id:12},\r\n            simi:{has:false,id:78},\r\n            zhushe:{has:false,id:79},\r\n            jiguang:{has:false,id:80},\r\n            koucun:{has:false,id:81},\r\n            qita:{has:false,id:13},\r\n        };\r\n        this.fckParams = {\r\n            all:{has:true,id:\"\"},\r\n            jiancha:{has:false,id:48},\r\n            fenmian:{has:false,id:49}\r\n        };\r\n        this.zhongyiParams = {\r\n            all:{has:true,id:\"\"},\r\n            toubu:{has:false,id:51},\r\n            jianjing:{has:false,id:52},\r\n            yaobu:{has:false,id:53},\r\n            tuibu:{has:false,id:54},\r\n            quanshen:{has:false,id:55},\r\n            jingluo:{has:false,id:56},\r\n            qita:{has:false,id:57}\r\n        }\r\n        this.tijianParams = {\r\n            default:{has:true,val:\"\"},\r\n            shangye:{has:false,val:75},\r\n            changgui:{has:false,val:67},\r\n            zhongnian:{has:false,val:69},\r\n            laonian:{has:false,val:70},\r\n            ruzhi:{has:false,val:71},\r\n            yunqian:{has:false,val:72},\r\n            qingnian:{has:false,val:68},\r\n            ertong:{has:false,val:74},\r\n            manbing:{has:false,val:73},\r\n        }\r\n        this.professionalParams = {\r\n            default:{has:true,val:this.defaultParams,proId:\"\"},\r\n            yake:{has:false,val:this.yakeParams,proId:\"2\"},\r\n            meirong:{has:false,val:this.meirongParams,proId:\"3\"},\r\n            fck:{has:false,val:this.fckParams,proId:\"4\"},\r\n            zhongyi:{has:false,val:this.zhongyiParams,proId:\"6\"},\r\n            tijian:{has:false,val:this.tijianParams,proId:\"5\"}\r\n        }\r\n    })\r\n\r\n    /**\r\n     * 打包主要控制器\r\n     */\r\n    app.controller(\"homeCtrl\",[\"$scope\",\"$rootScope\",\"$http\",\"Tool\",\"Ajax\",\"Weixin\",function($scope,$rootScope,$http,Tool,Ajax,Weixin){\r\n\t\t$scope.items = [];\r\n\t\t$scope.currentPage = 1;\r\n\t\t$scope.noProduct = false;\r\n\t\t$scope.noProductText = \"\";\r\n\t\t$scope.banners = [];\r\n\t\t//$scope.key = \"LFQBZ-7UNCX-VDR44-T34PN-OX2VQ-M2BNI\"; //个人私钥，后续可更换为企业密钥\r\n\t\t$scope.locationInfo =\"深圳市\"\r\n\t\t$scope.imgStyle = {\r\n\t\t\t\"width\":screen.width\r\n\t\t}\r\n\t\t$scope.gotoMenu = function(path){\r\n\t\t\tTool.goPage(path);\r\n\t\t}\r\n\r\n\t\t// 初始化页面\r\n\t\t$scope.init = function(){\r\n\t\t\t$rootScope.hasBgColor = false;\r\n\t\t\t$scope.loadRecommend();\r\n\t\t\t$scope.queryBanner();\r\n\t\t\t$scope.initSwiper();\r\n\t\t\tif(Tool.getSession(\"locationInfo\")){\r\n\t\t\t\t$scope.locationInfo = Tool.getSession(\"locationInfo\").city;\r\n\t\t\t}else{\r\n\t\t\t\tWeixin.wxInit($scope,$scope.getLocation);\r\n\t\t\t\tWeixin.wxConfig($scope);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 逆地址服务暂不用 \r\n\t\t$scope.getLocation = function(latitude,longitude){\r\n\t\t\tvar url = \"https://apis.map.qq.com/ws/geocoder/v1/?output=jsonp&callback=JSON_CALLBACK&location=\"+latitude+\",\"+longitude+\"&key=\"+$scope.key;\r\n\t\t\t$http.jsonp(url).success(function(data){\r\n\t\t\t\tif(data.status==0){\r\n\t\t\t\t\t$scope.locationInfo = data.result.address_component.city;\r\n\t\t\t\t\tvar locationInfo = Tool.getSession(\"locationInfo\");\r\n\t\t\t\t\tlocationInfo.city = data.result.address_component.city;\r\n\t\t\t\t\tTool.setSession(\"locationInfo\",locationInfo);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$scope.locationInfo = \"定位失败\";\r\n\t\t\t\t}\r\n\t\t\t}).error(function(){\r\n\t\t\t\t$scope.locationInfo = \"定位失败\";\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// 滚动监听\r\n\t\twindow.onscroll = function(){\r\n\t\t\tif($scope.loading||$scope.noProduct){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar body = document.body;\r\n\t\t\tvar html = document.documentElement;\r\n\t\t\tvar height = Math.max( body.scrollHeight, body.offsetHeight,html.clientHeight, html.scrollHeight, html.offsetHeight );\r\n\t\t\tif(height>window.innerHeight){\r\n\t\t\t\tif (height - window.scrollY - window.innerHeight < 100) {\r\n\t\t\t\t\t$scope.loadNext();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 查询热门推荐\r\n\t\t$scope.loadRecommend = function(){\r\n            $rootScope.loading = true;\r\n\t\t\tvar url = Tool.host+\"/wx/product/queryrecommend\";\r\n\t\t\tvar params = \"city=深圳&currentPage=\"+$scope.currentPage;\r\n\t\t\t$http.post(url,params,{\r\n\t\t\t\theaders:{\r\n\t\t\t\t\t'Content-type':'application/x-www-form-urlencoded;charset=UTF-8',\r\n\t\t\t\t}\r\n\t\t\t}).success(function(data){\r\n\t\t\t\tif(data.code==0){\r\n\t\t\t\t\tif(data.data.length<1){\r\n\t\t\t\t\t\tif($scope.items.length<1){\r\n\t\t\t\t\t\t\t$scope.noProductText = \"暂时没有热门项目\";\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t$scope.noProductText = \"已经没有项目了!\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$scope.noProduct = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$scope.mergeProdcut(data.data);\r\n\t\t\t\t\t\t$scope.items = $scope.items.concat(data.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n                $rootScope.loading = false;\r\n\t\t\t}).error(function(){\r\n\t\t\t\tTool.alert(\"获取热门推荐数据失败，请稍后再试!\");\r\n\t\t\t\t$scope.noProduct = true;\r\n                $rootScope.loading = false;\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// 处理数据\r\n\t\t$scope.mergeProdcut = function(items){\r\n\t\t\titems.forEach(function(item){\r\n\t\t\t\tif(item.priceunit!=null&&item.priceunit!=\"\"){\r\n\t\t\t\t\titem.preferPriceType = item.pricetype+\"/\"+item.priceunit;\r\n\t\t\t\t}else{\r\n\t\t\t\t\titem.preferPriceType = item.pricetype;\r\n\t\t\t\t}\r\n\t\t\t\tif(item.samllimg==\"\"||item.samllimg==null){\r\n\t\t\t\t\titem.samllimg = \"../contents/img/p_default.png\";\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// 获取图片轮播\r\n\t\t$scope.queryBanner = function(){\r\n            $rootScope.loading = true;\r\n\t\t\tvar url = Tool.host+\"/wx/banner/query\";\r\n\t\t\tvar params = \"type=home_banner\";\r\n\t\t\t$http.post(url,params,{\r\n\t\t\t\theaders:{\r\n\t\t\t\t\t'Content-type':'application/x-www-form-urlencoded;charset=UTF-8',\r\n\t\t\t\t}\r\n\t\t\t}).success(function(data){\r\n\t\t\t\tif(data.code==0){\r\n\t\t\t\t\t$scope.mergeBanner(data.data);\r\n\t\t\t\t\t$scope.banners = data.data;\r\n\t\t\t\t}\r\n                $rootScope.loading = false;\r\n\t\t\t}).error(function(){\r\n                $rootScope.loading = false;\r\n\t\t\t\tTool.alert(\"获取主页图片失败，请稍后再试!\");\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t// 为图片轮播添加链接\r\n\t\t$scope.mergeBanner = function(items){\r\n\t\t\tfor(var index in items){\r\n\t\t\t\tif(index==0){\r\n\t\t\t\t\titems[index].url=\"section/wrap-a.html\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 初始化图片轮播插件\r\n\t\t$scope.initSwiper = function(){\r\n\t\t\t//初始化swiper\r\n\t\t\tvar myswiper = new Swiper(\".swiper-container\",{\r\n\t\t\t\tloop:false,\r\n\t\t\t\tpagination: '.swiper-pagination',\r\n\t\t\t\tautoplay: 2000,\r\n\t\t\t\tautoplayDisableOnInteraction:false,\r\n\t\t\t\tobserveParents:true,  //\r\n\t\t\t\tobserver:true,\r\n\t\t\t\t//第一张轮播图显示6s,其他的2s\r\n\t\t\t\tonSlideChangeEnd: function(swiper){\r\n\t\t\t\t\tif(swiper.activeIndex==0||swiper.activeIndex==1){\r\n\t\t\t\t\t\tswiper.stopAutoplay();\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tif(swiper.activeIndex==0||swiper.activeIndex==1){\r\n\t\t\t\t\t\t\t\tswiper.startAutoplay();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},4000)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tswiper.startAutoplay();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t}\r\n\r\n\t\t// 跳转到详细页面\r\n\t\t$scope.detail = function(productId,hospitalId,type){\r\n\t\t\tif(type===5){\r\n\t\t\t\tTool.changeRoute(\"/exam/detail\",\"productId=\"+productId+\"&hospitalId=\"+hospitalId);\r\n\t\t\t}else{\r\n\t\t\t\tTool.changeRoute(\"/product/detail\",\"flag=1&productId=\"+productId+\"&hospitalId=\"+hospitalId);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\t// 图片轮播跳转\r\n\t\t$scope.activity = function(id){\r\n\t\t\tif(id===1){\r\n\t\t\t\tTool.changeRoute(\"/invite/new\");\r\n\t\t\t}\r\n\t\t\tif(id===2){\r\n\t\t\t\tTool.changeRoute(\"/activity\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 分页查询，查询下一页\r\n\t\t$scope.loadNext = function(){\r\n\t\t\t$scope.currentPage++;\r\n\t\t\t$scope.loadRecommend();\r\n\t\t}\r\n\t}])\r\n\r\n    app.controller(\"doctorCtrl\",[\"$scope\",\"$rootScope\",\"$http\",\"Tool\",\"Ajax\",\"Params\",function($scope,$rootScope,$http,Tool,Ajax,Params){\r\n        $scope.hasBg = false;\r\n        $scope.profValue = \"default\";\r\n        $scope.profItemValue = \"default\";\r\n        $scope.doctors = [];\r\n        $scope.noProduct = false;\r\n        $scope.noProductText = \"\";\r\n        // 下拉菜单项变量\r\n        $scope.orderParams ={\r\n            default:{has:true,val:\"\"},\r\n            title:{has:false,val:\"profession_title desc\"},\r\n            score:{has:false,val:\"score desc\"}\r\n        }\r\n        $scope.areaParams = Params.areaParams;\r\n        $scope.professionalParams = Params.professionalParams;\r\n\r\n        // 查询参数\r\n        $scope.queryParams = {\r\n            professionId:\"\",\r\n            itemid:\"\",\r\n            orderby:\"\",\r\n            city:\"深圳\",\r\n            area:\"\",\r\n            pageRows:10,\r\n            currentPage:1\r\n        }\r\n\r\n        // 导航栏变量，需定义在上述变量的后面\r\n        $scope.menuParams = {\r\n            area:{has:false,val:$scope.areaParams},\r\n            order:{has:false,val:$scope.orderParams},\r\n            professional:{has:false,val:$scope.professionalParams},\r\n        }\r\n\r\n        // 初始化页面\r\n        $scope.init = function(){\r\n            $rootScope.hasBgColor = true;\r\n            $scope.loadDoctor();\r\n        }\r\n\r\n        // 滚动监听\r\n        window.onscroll = function(){\r\n            if($rootScope.loading||$scope.noProduct){\r\n                return;\r\n            }\r\n            var body = document.body;\r\n            var html = document.documentElement;\r\n            var height = Math.max( body.scrollHeight, body.offsetHeight,html.clientHeight, html.scrollHeight, html.offsetHeight );\r\n            if(height>window.innerHeight){\r\n                if (height - window.scrollY - window.innerHeight < 100) {\r\n                    $scope.loadNext();\r\n                }\r\n            }\r\n        }\r\n\r\n        // 切换导航菜单\r\n        $scope.switchMenu = function(menu){\r\n            $scope.switchObj(menu,$scope.menuParams,true);\r\n        }\r\n\r\n        // 选择区域和排序项目\r\n        $scope.selectMenu = function(item,obj){\r\n            var ob = $scope.menuParams[obj].val;\r\n            $scope.switchObj(item,ob);\r\n            if(obj==\"area\"){\r\n                $scope.queryParams.area = ob[item].val;\r\n            }\r\n            if(obj==\"order\"){\r\n                $scope.queryParams.orderby = ob[item].val;\r\n            }\r\n            $scope.switchMenu(obj);\r\n            $scope.resetDate();\r\n            $scope.loadDoctor();\r\n        }\r\n\r\n        // 选择专科\r\n        $scope.selectProfression = function(item){\r\n            $scope.switchObj(item,$scope.professionalParams);\r\n        }\r\n\r\n        // 选择专科项目\r\n        $scope.selectProfressionItem = function(item,pro){\r\n            if(item!=$scope.profItemValue){\r\n                if($scope.profValue==\"\"&&$scope.profItemValue==\"\"){\r\n                    $scope.professionalParams[pro].val[item].has = true;\r\n                }else{\r\n                    $scope.professionalParams[$scope.profValue].val[$scope.profItemValue].has = false;\r\n                    $scope.professionalParams[pro].val[item].has = true;\r\n                }\r\n                $scope.profItemValue = item;\r\n                $scope.profValue = pro;\r\n                $scope.queryParams.professionId = $scope.professionalParams[pro].proId;\r\n                $scope.queryParams.itemid = $scope.professionalParams[pro].val[item].id;\r\n                $scope.switchMenu(\"professional\");\r\n                $scope.resetDate();\r\n                $scope.loadDoctor();\r\n\r\n            }\r\n        }\r\n\r\n        // 切换对象的值\r\n        $scope.switchObj = function(item,obj,hasBg){\r\n            for(var pro in obj){\r\n                if(pro==item){\r\n                    obj[pro].has = !obj[pro].has;\r\n                    if(hasBg){\r\n                        $scope.hasBg = obj[pro].has;\r\n                    }\r\n                }else{\r\n                    obj[pro].has = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        // 加载医生数据\r\n        $scope.loadDoctor = function(){\r\n            Ajax.post({\r\n                url:Tool.host+\"/wx/doctor/querydoctorbycityandprofession\",\r\n                params:$scope.queryParams\r\n            }).then(function(data){\r\n                if(data.data.length<1){\r\n                    if($scope.doctors.length<1){\r\n                        $scope.noProductText = \"没有项目信息,请选择其他区域或者时间!\";\r\n                    }else{\r\n                        $scope.noProductText = \"已经没有项目了!\";\r\n                    }\r\n                    $scope.noProduct = true;\r\n                }else{\r\n                    $scope.mergeDoctor(data.data);\r\n                    $scope.doctors = $scope.doctors.concat(data.data);\r\n                }\r\n            }).catch(function(){\r\n                $scope.noProduct = true;\r\n                Tool.alert(\"数据加载失败，请稍后再试!\");\r\n            }).finally(function(){\r\n                $rootScope.loading =false;\r\n            })\r\n        }\r\n\r\n        // 处理医生数据\r\n        $scope.mergeDoctor = function(items){\r\n            items.forEach(function(item){\r\n                if(item.score==\"\"||item.score==null){\r\n                    item.score=\"暂无评\";\r\n                }\r\n                if(item.sales==\"\"||item.sales==null){\r\n                    item.sales=0;\r\n                }\r\n            })\r\n        }\r\n\r\n        // 加载下一页数据\r\n        $scope.loadNext = function(){\r\n            $scope.queryParams.currentPage++;\r\n            $scope.loadDoctor();\r\n        }\r\n\r\n        // 重置查询数据\r\n        $scope.resetDate = function(){\r\n            $scope.queryParams.currentPage = 1;\r\n            $scope.noProduct = false;\r\n            $scope.noProductText = \"\";\r\n            $scope.doctors = [];\r\n        }\r\n\r\n        // 跳转到详情页面\r\n        $scope.detail = function(id){\r\n            Tool.changeRoute(\"/doctor/detail\",\"id=\"+id);\r\n        }\r\n    }])\r\n\r\n    app.controller(\"interactionCtrl\",[\"$scope\",\"$rootScope\",\"$http\",\"Tool\",\"Ajax\",function($scope,$rootScope,$http,Tool,Ajax){\r\n        $scope.noProductText = \"\";\r\n        $scope.noProduct = false;\r\n        $scope.hasInteractionMenu = true;\r\n        $scope.queryParams = {\r\n            flag:1,\r\n            pageRows:10,\r\n            currentPage:1\r\n        }\r\n        $scope.navParams = {\r\n            kanya:{has:true,val:1},\r\n            shumei:{has:false,val:2},\r\n            yunsheng:{has:false,val:3}\r\n        }\r\n        $scope.posts = [];\r\n\r\n        //初始化页面\r\n        $scope.init = function(){\r\n            $rootScope.hasBgColor = false;\r\n            $scope.queryPost();\r\n        }\r\n\r\n        // 加载帖子数据\r\n        $scope.queryPost = function(){\r\n            Ajax.post({\r\n                url:Tool.host+\"/wx/post/postList\",\r\n                params:$scope.queryParams,\r\n            }).then(function(data){\r\n                if(data.data.length<1){\r\n                    if($scope.posts.length<1){\r\n                        $scope.noProductText = \"还没有帖子信息\";\r\n                    }else{\r\n                        $scope.noProductText = \"已经没有项目了!\";\r\n                    }\r\n                    $scope.noProduct = true;\r\n                }else{\r\n                    $scope.mergePost(data.data);\r\n                    $scope.posts = $scope.posts.concat(data.data);\r\n                }\r\n            }).catch(function(){\r\n                Tool.alert(\"获取帖子信息失败!\");\r\n            }).finally(function(){\r\n                $rootScope.loading = false;\r\n            })\r\n        }\r\n\r\n        // 处理帖子数据\r\n        $scope.mergePost = function(items){\r\n            items.forEach(function(item){\r\n                if(item.visitNum==null||item.visitNum==\"\"){\r\n                    item.visitNum=0;\r\n                }\r\n                if(item.commentNum==\"\"||item.commentNum==null){\r\n                    item.commentNum = 0;\r\n                }\r\n                for(var index in item.list2){\r\n                    if(item.list2[index]==\"\"||item.list2[index]==null){\r\n                        item.list2.splice(index,1);\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n        // 加载下一页数据\r\n        $scope.loadNext = function(){\r\n            $scope.queryParams.currentPage++;\r\n            $scope.queryPost();\r\n        }\r\n\r\n        // 滚动监听\r\n        window.onscroll = function(){\r\n            if($rootScope.loading||$scope.noProduct){\r\n                return;\r\n            }\r\n            var body = document.body;\r\n            var html = document.documentElement;\r\n            var height = Math.max( body.scrollHeight, body.offsetHeight,html.clientHeight, html.scrollHeight, html.offsetHeight );\r\n            if(height>window.innerHeight){\r\n                if (height - window.scrollY - window.innerHeight < 100) {\r\n                    $scope.loadNext();\r\n                }\r\n            }\r\n        }\r\n\r\n        // 切换帖子类型\r\n        $scope.switchNav = function(item){\r\n            $scope.queryParams.flag = $scope.navParams[item].val;\r\n            Tool.select(item,$scope.navParams);\r\n            $scope.queryParams.currentPage = 1;\r\n            $scope.noProduct = false;\r\n            $scope.noProductText = \"\";\r\n            $scope.posts = [];\r\n            $scope.queryPost();\r\n        }\r\n\r\n        // 跳转到详细页面\r\n        $scope.detail = function(id){\r\n            Tool.changeRoute(\"/interaction/detail\",\"id=\"+id);\r\n        }\r\n\r\n    }])\r\n\r\n    app.controller(\"userCtrl\",[\"$scope\",\"$rootScope\",\"$location\",\"Tool\",\"Ajax\",function($scope,$rootScope,$location,Tool,Ajax){\r\n        $scope.user = {};\r\n        $scope.isLogin = false;\r\n\r\n        //页面初始化\r\n        $scope.init = function(){\r\n            $rootScope.hasBgColor = true;\r\n            Tool.noWindowListen();\r\n            $scope.initText();\r\n            if(Tool.checkLogin()){\r\n                Tool.loadUserinfo();\r\n                $scope.queryFocus();\r\n            }\r\n        }\r\n\r\n        //切换用户名称的显示\r\n        $scope.initText = function(){\r\n            if(Tool.checkLogin()){\r\n                Tool.loadUserinfo();\r\n                $scope.user = Tool.userInfo;\r\n                $scope.isLogin = true;\r\n                if($scope.user.nickname===\"\"||$scope.user.nickname===null){\r\n                    $scope.user.nickname = \"您还没有填写昵称\";\r\n                }\r\n            }else{\r\n                $scope.user.face = \"../contents/img/men-head.png\";\r\n                $scope.user.tip = \"点击登录注册\";\r\n            }\r\n        }\r\n\r\n        // 未开放项目的提示\r\n        $scope.alert = function(mess){\r\n            Tool.alert(mess);\r\n        }\r\n\r\n        //获取关注数量和粉丝数量\r\n        $scope.queryFocus = function(){\r\n            Ajax.post({\r\n                url:Tool.host+\"/wx/focus/focusManCount\",\r\n                params: {\"accessToken\":Tool.userInfo.accessToken},\r\n            }).then(function(data){\r\n                 if(data.code==0){\r\n                    if(data.data.countFocusMan===null||data.data.countFocusMan===\"\"){\r\n                        data.data.countFocusMan = 0;\r\n                    }\r\n                    if(data.data.countFansMan===null||data.data.countFansMan ===\"\"){\r\n                        data.data.countFansMan =0;\r\n                    }\r\n                    $scope.countFocusMan = data.data.countFocusMan;\r\n                    $scope.countFansMan = data.data.countFansMan;\r\n                }\r\n            }).catch(function(){\r\n                $scope.countFocusMan = 0;\r\n                $scope.countFansMan = 0;\r\n                Tool.alert(\"获取粉丝信息失败!\");\r\n            }).finally(function(){\r\n\t\t\t\t$rootScope.loading = false;\r\n\t\t\t})\r\n        }\r\n        \r\n        //跳转到选项页面\r\n        $scope.goto = function(path,query){\r\n            if(Tool.checkLogin()){\r\n                Tool.changeRoute(path,query);\r\n            }else{\r\n                Tool.changeRoute(\"/login\",\"\");\r\n            }\r\n        };\r\n    }])\r\n\r\n    return app;\r\n})"],"sourceRoot":"/source/"}