{"version":3,"sources":["loginCtrl.min.js"],"names":["app","controller","$scope","$http","Ajax","Tool","phone","password","init","loadHost","login","check","host","getHost","url","dataStr","post","headers","Content-type","success","loginSuccess","error","loginError","alert","test","length","data","code","setLocal","accessToken","goPage","err"],"mappings":"AAAAA,IAAIC,WAAW,aAAa,SAAS,QAAQ,OAAO,OAAO,SAASC,EAAOC,EAAMC,EAAKC,GACrFH,EAAOI,MAAQ,GACfJ,EAAOK,SAAW,GAElBL,EAAOM,KAAO,WACbJ,EAAKK,SAASP,EAAO,eAEtBA,EAAOQ,MAAM,WACZ,GAAGR,EAAOS,QAAQ,CACjB,GAAIC,GAAOP,EAAKQ,UACZC,EAAMF,EAAK,oBAEXG,IADQT,MAAMJ,EAAOI,MAAMC,SAASL,EAAOK,UACjC,SAASL,EAAOI,MAAM,aAAaJ,EAAOK,SACxDJ,GAAMa,KAAKF,EAAIC,GACdE,SACGC,eAAe,qDAEhBC,QAAQjB,EAAOkB,cAAcC,MAAMnB,EAAOoB,gBAE7CjB,GAAKkB,MAAMrB,EAAO,uBAGpBA,EAAOS,MAAQ,WACd,SAAG,sBAAsBa,KAAKtB,EAAOI,QAAQJ,EAAOK,SAASkB,QAAQ,GAAGvB,EAAOK,SAASkB,QAAQ,KAOjGvB,EAAOkB,aAAe,SAASM,GAChB,GAAXA,EAAKC,MACPtB,EAAKuB,SAAS,OAAOF,EAAKA,MAC1BrB,EAAKuB,SAAS,cAAcF,EAAKA,KAAKG,aACtCxB,EAAKyB,OAAO,yBACO,GAAXJ,EAAKC,KACbtB,EAAKkB,MAAMrB,EAAO,kBAElBG,EAAKkB,MAAMrB,EAAO,UAIpBA,EAAOoB,WAAa,SAASS,GAC5B1B,EAAKkB,MAAMrB,EAAO","file":"loginCtrl.min.js","sourcesContent":["app.controller(\"loginCtrl\",[\"$scope\",\"$http\",\"Ajax\",\"Tool\",function($scope,$http,Ajax,Tool){\r\n\t$scope.phone = \"\" ;\r\n\t$scope.password = \"\";\r\n\t\r\n\t$scope.init = function(){\r\n\t\tAjax.loadHost($scope,function(){});\r\n\t}\r\n\t$scope.login=function(){\r\n\t\tif($scope.check()){\r\n\t\t\tvar host = Tool.getHost();\r\n\t\t\tvar url = host+\"/wx/login/wxlogin\";\r\n\t\t\tvar data = {phone:$scope.phone,password:$scope.password};\r\n\t\t\tvar dataStr = \"phone=\"+$scope.phone+\"&password=\"+$scope.password;\r\n\t\t\t$http.post(url,dataStr,{\r\n\t\t\t\theaders: {\r\n\t\t\t\t   'Content-type':'application/x-www-form-urlencoded;charset=UTF-8',\r\n\t\t\t\t }\r\n\t\t\t}).success($scope.loginSuccess).error($scope.loginError);\r\n\t\t}else{\r\n\t\t\tTool.alert($scope,\"请检查手机号码或者密码长度符合要求！\");\r\n\t\t}\r\n\t}\r\n\t$scope.check = function(){\r\n\t\tif(/^1[3|4|5|7|8]\\d{9}$/.test($scope.phone)&&$scope.password.length>=8&&$scope.password.length<=20){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t//登录回调\r\n\t$scope.loginSuccess = function(data){\r\n\t\tif(data.code==0){\r\n\t\t\tTool.setLocal(\"user\",data.data);\r\n\t\t\tTool.setLocal(\"accessToken\",data.data.accessToken);\r\n\t\t\tTool.goPage(\"/new/htmls/user.html\");\r\n\t\t}else if(data.code==1){\r\n\t\t\tTool.alert($scope,\"账号或者密码错误,请重新输入\");\r\n\t\t}else{\r\n\t\t\tTool.alert($scope,\"未知错误!\");\r\n\t\t}\r\n\r\n\t}\r\n\t$scope.loginError = function(err){\r\n\t\tTool.alert($scope,\"登录错误，请稍后再试！\");\r\n\t}\r\n}])\r\n"],"sourceRoot":"/source/"}