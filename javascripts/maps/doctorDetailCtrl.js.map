{"version":3,"sources":["doctorDetailCtrl.js"],"names":["app","controller","$scope","$http","$location","Ajax","Tool","loading","hasTime","hasProduct","description","has","val","use","id","doctorInfo","time","hasSelect","openSelect","selectDay","selectTime","selectId","noTime","timeList","order","hospitalId","doctorId","productId","scheduleId","doctorName","treatmentTime","hospitalName","hospitalAddress","preferPrice","productName","flag","dealMoney","payMoney","realMoney","giftMoney","code","discountid","init","loadHost","getParams","queryDoctor","querySchedule","initSwiper","mySwiper","Swiper","slidesPerView","slidesPerGroup","observeParents","observer","toPage","params","$event","slidePrev","slideNext","stopPropagation","selectProduct","search","goPage","showDescription","showUse","url","host","post","headers","content-type","success","data","hospitalname","hospitaladdress","dentallist","forEach","item","priceunit","preferPriceType","pricetype","alert","error","mergeDoctor","items","score","length","mergeSchedule","first","property","date","slice","value","switchDay","select","day","days","index","scheduleid","orderDetail","title","price","isLogin","isUserInfoComplete","loadUserinfo","paramsStr","Content-type","accessToken","userInfo","parseFloat","setSession","hasTip","comfirm","hideSelect","ask"],"mappings":"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","file":"doctorDetailCtrl.js","sourcesContent":["app.controller(\"doctorDetailCtrl\",[\"$scope\",\"$http\",\"$location\",\"Ajax\",\"Tool\",function($scope,$http,$location,Ajax,Tool){\r\n\t$scope.loading = false;\r\n\t$scope.hasTime = false;\r\n\t$scope.hasProduct = false;\r\n\t$scope.description ={\r\n\t\thas:false,\r\n\t\tval:\"查看全部\",\r\n\t}\r\n\t$scope.use = {\r\n\t\thas:false,\r\n\t\tval:\"查看全部\"\r\n\t}\r\n\t$scope.id = null;\r\n\t$scope.doctorInfo = {};\r\n\t$scope.time = {\r\n\t\thasSelect:false,\r\n\t\topenSelect:false,\r\n\t\tselectDay:null,\r\n\t\tselectTime:null,\r\n\t\tselectId:null,\r\n\t\tnoTime:false,\r\n\t\ttimeList:{}\r\n\t}\r\n\t$scope.order = {\r\n\t\thospitalId:\"\",\r\n\t    doctorId:\"\",\r\n\t    productId:\"\",\r\n\t    scheduleId:\"\",\r\n\t    doctorName:\"\",\r\n\t    treatmentTime:\"\",\r\n\t    hospitalName:\"\",\r\n\t    hospitalAddress:\"\",\r\n\t    preferPrice:\"\",\r\n\t    productName:\"\",\r\n\t    flag:1,\r\n\t    dealMoney:\"\",\r\n\t    payMoney:\"\",\r\n\t    realMoney:\"\",\r\n\t    giftMoney:\"\",\r\n\t\tcode:null,\r\n\t\tdiscountid:null,\r\n\t}\r\n\r\n\t/**\r\n\t** 初始化页面\r\n\t*/\r\n\t$scope.init = function(){\r\n\t\tAjax.loadHost($scope,function(){\r\n\t\t\t$scope.getParams();\r\n\t\t\t$scope.queryDoctor();\r\n\t\t\t$scope.querySchedule();\r\n\t\t\t$scope.initSwiper();\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t** 初始化swiper\r\n\t*/\r\n\t$scope.initSwiper = function(){\r\n\t\t$scope.mySwiper = new Swiper('.swiper-container', {\r\n\t\t\tslidesPerView : 4,\r\n\t\t\tslidesPerGroup : 4,\r\n\t\t\tobserveParents:true,  //\r\n\t\t\tobserver:true\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t** swiper跳转到指定页\r\n\t*/\r\n\t$scope.toPage = function(params,$event){\r\n\t\tif(params===\"per\"){\r\n\t\t\t$scope.mySwiper.slidePrev();\r\n\t\t}\r\n\t\tif(params===\"next\"){\r\n\t\t\t$scope.mySwiper.slideNext();\r\n\t\t}\r\n\t\t$event.stopPropagation();\r\n\t}\r\n\r\n\t$scope.selectTime = function(){\r\n\t\t$scope.hasTime = !$scope.hasTime;\r\n\t}\r\n\r\n\t$scope.selectProduct = function(){\r\n\t\t$scope.hasProduct = !$scope.hasProduct;\r\n\t}\r\n\r\n\t$scope.getParams = function(){\r\n\t\tif($location.search().id){\r\n\t\t\t$scope.id = $location.search().id;\r\n\t\t}else{\r\n\t\t\tTool.goPage(\"/new/htmls/doctor.html\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* 收起和隐藏医生简介\r\n\t*/\r\n\t$scope.showDescription = function(){\r\n\t\t$scope.description.has = !$scope.description.has;\r\n\t\tif($scope.description.has){\r\n\t\t\t$scope.description.val = \"收起简介\";\r\n\t\t}else{\r\n\t\t\t$scope.description.val = \"查看全部\";\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t** 收起和隐藏擅长简介\r\n\t*/\r\n\t$scope.showUse = function(){\r\n\t\t$scope.use.has = !$scope.use.has;\r\n\t\tif($scope.use.has){\r\n\t\t\t$scope.use.val = \"收起简介\";\r\n\t\t}else{\r\n\t\t\t$scope.use.val = \"查看全部\";\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* 获取医生信息\r\n\t*/\r\n\t$scope.queryDoctor = function(){\r\n\t\t$scope.loading = true;\r\n\t\tvar url = $scope.host+\"/wx/doctor/queryDoctorDetailInfo\";\r\n\t\tvar params = \"needPackageInfo=true&id=\"+$scope.id;\r\n\t\t$http.post(url,params,{\r\n\t\t\theaders:{\r\n\t\t\t\t\"content-type\":'application/x-www-form-urlencoded;charset=UTF-8',\r\n\t\t\t}\r\n\t\t}).success(function(data){\r\n\t\t\tif(data.code==0){\r\n\t\t\t\t$scope.order.doctorName = data.data.doctorName;\r\n\t\t\t\t$scope.order.doctorId = data.data.id;\r\n\t\t\t\t$scope.order.hospitalId = data.data.hospitalId;\r\n\t\t\t\t$scope.order.hospitalName = data.data.hospitalname;\r\n\t\t\t\t$scope.order.hospitalAddress = data.data.hospitaladdress;\r\n\t\t\t\tdata.data.dentallist.forEach(function(item){\r\n\t\t\t\t\tif(item.priceunit!=null&&item.priceunit!=\"\"){\r\n\t\t\t\t\t\titem.preferPriceType = item.pricetype+\"/\"+item.priceunit;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\titem.preferPriceType = item.pricetype;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t$scope.doctorInfo = data.data;\r\n\t\t\t}else{\r\n\t\t\t\tTool.alert($scope,\"连接数据失败，请稍后再试!\");\r\n\t\t\t}\r\n\t\t\t$scope.loading = false;\r\n\t\t}).error(function(){\r\n\t\t\t$scope.loading = false;\r\n\t\t\tTool.alert($scope,\"连接数据失败，请稍后再试!\");\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t* 检查医生信息\r\n\t*/\r\n\t$scope.mergeDoctor = function(items){\r\n\t\titems.forEach(function(item){\r\n\t\t\titem.score==null|item.score==\"\"?item.score=\"暂无评分\":item.score+=\"分\";\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t** 获取医生排班信息\r\n\t*/\r\n\t$scope.querySchedule = function(){\r\n\t\tvar url = $scope.host+\"/wx/order/querybydoctorid\";\r\n\t\tvar params = \"doctorId=\"+$scope.id;\r\n\t\t$http.post(url,params,{\r\n\t\t\theaders:{\r\n\t\t\t\t\"content-type\":'application/x-www-form-urlencoded;charset=UTF-8',\r\n\t\t\t}\r\n\t\t}).success(function(data){\r\n\t\t\tif(data.code==0){\r\n\t\t\t\tif(data.data.length>0){\r\n\t\t\t\t\t$scope.mergeSchedule(data.data);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$scope.time.noTime = true;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tTool.alert($scope,\"数据连接失败，请稍后再试!\");\r\n\t\t\t}\r\n\t\t}).error(function(){\r\n\t\t\tTool.alert($scope,\"数据连接失败，请稍后再试!\");\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t** 检查医生排班信息\r\n\t*/\r\n\t$scope.mergeSchedule = function(items){\r\n\t\tvar first = true;\r\n\t\titems.forEach(function(item){\r\n\t\t\tvar property = item.date.slice(5,10);\r\n\t\t\titem.date = property;\r\n\t\t\tif(first){\r\n\t\t\t\t$scope.time.timeList[property] = {\r\n\t\t\t\t\thas:true,\r\n\t\t\t\t\tvalue:item\r\n\t\t\t\t}\r\n\t\t\t\tfirst = false;\r\n\t\t\t}else{\r\n\t\t\t\t$scope.time.timeList[property] = {\r\n\t\t\t\t\thas:false,\r\n\t\t\t\t\tvalue:item\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t** 切换导航栏\r\n\t*/\r\n\t$scope.switchDay = function(property){\r\n\t\tTool.select(property,$scope.time.timeList);\r\n\t}\r\n\r\n\t/**\r\n\t** 选择时间\r\n\t*/\r\n\t$scope.selectTime = function(id,time,day){\r\n\t\tif($scope.time.selectDay!=null&&$scope.time.selectId!=null){\r\n\t\t\tvar selectDay = $scope.time.selectDay;\r\n\t\t\tvar selectId = $scope.time.selectId;\r\n\t\t\tif($scope.time.timeList[selectDay]){\r\n\t\t\t\tvar days = $scope.time.timeList[selectDay].value;\r\n\t\t\t\tfor(var index in days.timeList){\r\n\t\t\t\t\tif(days.timeList[index].scheduleid == selectId){\r\n\t\t\t\t\t\tdays.timeList[index].has = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif($scope.time.timeList[day]){\r\n\t\t\tvar days = $scope.time.timeList[day].value;\r\n\t\t\tfor(var index in days.timeList){\r\n\t\t\t\tif(days.timeList[index].scheduleid==id){\r\n\t\t\t\t\tdays.timeList[index].has = true;\r\n\t\t\t\t\t$scope.time.selectDay = day;\r\n\t\t\t\t\t$scope.time.selectId = id;\r\n\t\t\t\t\t$scope.time.selectTime = time;\r\n\t\t\t\t\t$scope.time.hasSelect = true;\r\n\t\t\t\t\t$scope.order.scheduleId = id;\r\n\t\t\t\t\t$scope.order.treatmentTime = day+\" \"+time;\r\n\t\t\t\t\t$scope.time.openSelect = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t** 获取money以及跳转页面\r\n\t*/\r\n\t$scope.orderDetail = function(id,title,price){\r\n\t\tif(!$scope.time.noTime){\r\n\t\t\tif($scope.time.hasSelect){\r\n\t\t\t\tif(!Tool.isLogin()){\r\n\t\t\t\t\tTool.comfirm($scope,\"请先登录并完善个人信息\",function(){\r\n\t\t\t\t\t\tTool.goPage(\"/new/htmls/login.html\");\r\n\t\t\t\t\t})\r\n\t\t\t\t}else if(!Tool.isUserInfoComplete()){\r\n\t\t\t\t\tTool.comfirm($scope,\"请完善个人信息!\",function(){\r\n\t\t\t\t\t\tTool.goPage(\"/new/htmls/userinfo.html\");\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$scope.loading = true;\r\n\t\t\t\t\t$scope.order.productId = id;\r\n\t\t\t\t\t$scope.order.productName = title;\r\n\t\t\t\t\t$scope.order.preferPrice = \"￥\"+price;\r\n\t\t\t\t\tTool.loadUserinfo($scope);\r\n\t\t\t\t\tvar url = $scope.host +\"/wx/order/checkCodeMoney\";\r\n\t\t\t\t\tvar paramsStr = \"productId=\"+$scope.order.productId;\r\n\t\t\t\t\t$http.post(url,paramsStr,{\r\n\t\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t\t\"Content-type\":\"application/x-www-form-urlencoded;charset=UTF-8\",\r\n\t\t\t\t\t\t\t\"accessToken\":$scope.userInfo.accessToken\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).success(function(data){\r\n\t\t\t\t\t\tTool.loading = false;\r\n\t\t\t\t\t\t$scope.order.dealMoney = data.dealMoney;\r\n\t                    $scope.order.payMoney = data.payMoney;\r\n\t                    $scope.order.realMoney = data.realMoney;\r\n\t                    $scope.order.giftMoney = data.giftMoney;\r\n\t\t\t\t\t\tif(parseFloat($scope.order.giftMoney)<=0){\r\n\t\t\t\t\t\t\t$scope.order.flag = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tTool.setSession(\"makeorder\",$scope.order);\r\n\t\t\t\t\t\tTool.goPage(\"/new/htmls/makeorder.html\");\r\n\t\t\t\t\t}).error(function(){\r\n\t\t\t\t\t\tTool.loading = false;\r\n\t\t\t\t\t\tTool.alert($scope,\"加载App付款金额失败!\",function(){\r\n\t\t\t\t\t\t\t$scope.hasTip = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tTool.alert($scope,\"请先预约就医时间!\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tTool.alert($scope,\"此医生没有排班，暂不能下单。去其他医生看看吧!\");\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t** 打开时间选择窗口\r\n\t*/\r\n\t$scope.openSelect = function(){\r\n\t\tif($scope.time.noTime){\r\n\t\t\tTool.alert($scope,\"此医生没有排班，暂不能下单。去其他医生看看吧!\");\r\n\t\t}else{\r\n\t\t\t$scope.time.openSelect = true;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t** 隐藏时间选择窗口\r\n\t*/\r\n\t$scope.hideSelect = function($event){\r\n\t\t$scope.time.openSelect = false;\r\n\t}\r\n\r\n\t/*\r\n\t** 跳转到咨询页面\r\n\t*/\r\n\t$scope.ask = function(){\r\n\t\tTool.loadUserinfo($scope,function(){\r\n\t\t\tTool.comfirm($scope,\"您还没有登录，请先登录\",function(){\r\n\t\t\t\tTool.goPage(\"/new/htmls/user.html\");\r\n\t\t\t})\r\n\t\t});\r\n\t\tif(Tool.isLogin()){\r\n\t\t\tTool.goPage(\"/new/htmls/askdoctor.html\");\r\n\t\t}\r\n\t}\r\n}])\r\n"],"sourceRoot":"/source/"}